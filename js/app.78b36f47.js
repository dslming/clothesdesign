(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],g=0,m=[];g<r.length;g++)i=r[g],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],a=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},n={app:0},s=[];function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0074":function(t,e,o){},"0332":function(t,e,o){},"0348":function(t,e,o){},"050d":function(t,e,o){},"12ca":function(t,e,o){"use strict";var a=o("75fb"),n=o.n(a);n.a},"239d":function(t,e,o){"use strict";var a=o("0332"),n=o.n(a);n.a},2487:function(t,e,o){},2854:function(t,e,o){"use strict";var a=o("ac33"),n=o.n(a);n.a},"2b67":function(t,e,o){"use strict";var a=o("0348"),n=o.n(a);n.a},"2f72":function(t,e){var o,a=document.createElement("canvas"),n=500,s=null;function i(t,e,i){o.clearRect(0,0,n,n),o.drawImage(this,0,0,n,n),s=o.getImageData(0,0,n,n);var r=0,l=s.data.length;for(r;r<l;r+=4)s.data[r]=t[0],s.data[r+1]=t[1],s.data[r+2]=t[2];o.putImageData(s,0,0),s=null,e&&e(a.toDataURL(),t,i)}function r(t){alert("Failed to load picture")}a.width=n,a.height=n,a.style.width=n+"px",a.style.height=n+"px",o=a.getContext("2d"),window.changeCommonImageColor=function(t,e,o,a){var n=document.createElement("img");n.crossOrigin=!0,n.src=t,n.onload=function(t){i.bind(this)(e,o,a)},n.onerror=r}},"35f4":function(t,e,o){},"36e8":function(t,e,o){"use strict";var a=o("dac2"),n=o.n(a);n.a},3904:function(t,e,o){},"48e4":function(t,e,o){"use strict";var a=o("bede"),n=o.n(a);n.a},"4c71":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("a15b"),o("4e82"),o("a434"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("a026"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"customize"},[o("mytop"),o("tool-bar"),o("mymain"),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.shadeState,expression:"$store.state.shadeState"}],staticClass:"shade"},[o("help-box"),o("save-box"),o("loading-box"),o("warm-prompt"),o("share-box")],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"top"},[o("h2",{staticClass:"myh2"},[t._v(t._s(t.$store.state.title))]),o("div",{staticClass:"topright"},[o("div",{staticClass:"topbtn",staticStyle:{"background-position-y":"-180px"},on:{click:t.done}}),o("div",{staticClass:"topbtn",staticStyle:{"background-position-y":"-120px"},on:{click:t.service}})])])},r=[],l={methods:{choiseTool:function(t){this.$store.commit("setWhatTool",t),this.$store.state.svgBoxShow||this.$store.commit("setSvgBoxShow",!0)},service:function(){"shop"!==globalData.query.scene?alert("only for client"):window.parent&&window.parent.product&&window.parent.product.clickInquiry&&window.parent.product.clickInquiry()},done:function(){"tontos"===globalData.query.scene?confirm("确定关闭页面?")&&(location.href=globalData.base5):"shop"===globalData.query.scene&&this.$store.commit("setShadeState",4)}},created:function(){},components:{},mounted:function(){}},c=l,u=(o("dee7"),o("2877")),g=Object(u["a"])(c,i,r,!1,null,null,null),m=g.exports,d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("div",{staticClass:"movingbox",style:{transform:t.$store.state.svgBoxShow?"translateX(0)":"translateX(-100%)",width:t.$store.state.smallScreen?"calc(100% - 446px)":"calc(50% - 223px)"}},[o("svg-box")],1),o("canvas-box"),o("btn-box"),o("nav-box"),o("div",{staticClass:"fixedbox",on:{mousedown:function(t){t.stopPropagation()}}},[o("color-tool"),o("picture-box"),o("text-box"),o("pantone-box"),o("categories"),o("common-images")],1)],1)},h=[],p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.whatTool,expression:"$store.state.whatTool===1"}],staticClass:"toolbox"},[o("h3",{staticClass:"tooltop ovtext"},[t._v(t._s(t.comColorName))]),o("div",{staticClass:"clearfix"},t._l(t.comPartColor,(function(e,a){return o("div",{key:a,staticClass:"onesvgcolor",style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{click:function(o){return t.clickColor(e,!0)}}})})),0),o("h3",{staticClass:"tooltop ovtext"},[t._v("All the colors")]),o("div",{staticClass:"clearfix"},t._l(t.comAllColor,(function(e){return o("div",{key:e.rgb,staticClass:"onesvgcolor",style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{click:function(o){return t.clickColor(e,!1)}}})})),0)])},v=[],f={methods:{clickColor:function(t,e){svgTool.cancelFun();var o,a="";this.$store.commit("setPantoneBoxShow",!0),this.$store.commit("setChoisePantone",t),this.$store.commit("setColorTitle","Choose Your Colour"),e?(a=svgTool.currentKey,this.$store.state.svgBoxShow||this.$store.commit("setSvgBoxShow",!0)):this.$store.state.svgBoxShow&&this.$store.commit("setSvgBoxShow",!1),o=svgTool.getColorInGroupByColor(t.rgb,a),svgTool.choiseColor(t,o,a,!0)}},created:function(){},components:{},mounted:function(){},computed:{comColorName:function(){return this.$store.state.whichSvg+" colors"},comPartColor:function(){return this.$store.state.svgColorObj[this.$store.state.whichSvg]},comAllColor:function(){var t,e,o,a,n,s,i=[];for(t in this.$store.state.svgColorObj)for(o=this.$store.state.svgColorObj[t].length,e=0;e<o;e++){for(s=!0,n=i.length,a=0;a<n;a++)if(i[a].rgb===this.$store.state.svgColorObj[t][e].rgb){s=!1;break}s&&i.push(this.$store.state.svgColorObj[t][e])}return i}}},b=f,w=(o("2854"),Object(u["a"])(b,p,v,!1,null,null,null)),y=w.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.pantoneBoxShow,expression:"$store.state.pantoneBoxShow"}],staticClass:"toolbox"},[o("h3",{staticClass:"tooltop ovtext"},[t._v(t._s(t.$store.state.colorTitle)+" "),o("div",{staticClass:"closebtn",on:{click:t.cl}})]),o("div",{staticClass:"toolboxmain"},[t._l(t.$store.state.pantoneData,(function(e){return o("div",{key:e.rgb,staticClass:"onepantone",class:{active:e.rgb===t.$store.state.choisePantone.rgb},style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{mousedown:function(o){return t.clickColor(e,"color")}}},[o("div",{staticClass:"juanjiao"}),o("img",{staticClass:"gouxuan",attrs:{src:"/static/image/gouxuan.png",alt:"choise"}})])})),o("p",{staticClass:"latelyp ovtext"},[t._v("Recently Used Colors")]),t._l(t.$store.state.latelyColor,(function(e){return o("div",{key:e.pantone,staticClass:"onepantone",class:{active:e.rgb===t.$store.state.choisePantone.rgb},style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{mousedown:function(o){return t.clickColor(e,"lately")}}},[o("div",{staticClass:"juanjiao"}),o("img",{staticClass:"gouxuan",attrs:{src:"/static/image/gouxuan.png",alt:"choise"}})])})),o("div",{staticClass:"addtextbtn",staticStyle:{float:"right",margin:"20px"},on:{click:t.cl}},[t._v("Done")])],2)])},C=[],S={data:function(){return{latelyColor:JSON.parse(localStorage.getItem("latelyColor"))||[]}},methods:{clickColor:function(t,e){var o;this.$store.state.choisePantone.rgb!==t.rgb&&("color"===e&&this.$store.commit("addLatelyColor",t),"Choose Your Colour"===this.$store.state.colorTitle?(svgTool.addHistoryEndToStart(),this.$store.commit("setChoisePantone",t),svgTool.changeColor(t)):"Font Colors"===this.$store.state.colorTitle&&(this.$store.commit("setTextObj",{key:"fill_color",value:t.rgb}),this.$store.commit("setTextObj",{key:"pantone1",value:t.pantone}),o=encodeURIComponent(JSON.stringify(this.$store.state.textObj)),getFontPic(this.$store.state.textObj,(function(t){svgTool.changeImg(t,o)}))))},cl:function(){this.$store.commit("setPantoneBoxShow",!1)}},created:function(){},components:{},mounted:function(){}},T=S,B=(o("d592"),Object(u["a"])(T,x,C,!1,null,null,null)),O=B.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"svgbox"}},[o("image-handle")],1)},_=[],I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.imageToolShow,expression:"$store.state.imageToolShow"}],ref:"imgHandle",staticClass:"imagehandle",on:{mousedown:function(t){t.stopPropagation()}}},[o("div",{staticClass:"lt",on:{mousedown:function(e){return t.buttonDown(1,e)}}}),o("div",{staticClass:"rt",on:{mousedown:function(e){return t.buttonDown(2,e)}}}),o("div",{staticClass:"rb",on:{mousedown:function(e){return t.buttonDown(3,e)}}}),o("div",{staticClass:"lb",on:{mousedown:function(e){return t.buttonDown(4,e)}}}),o("div",{staticClass:"mydel",on:{mousedown:t.delImg}}),o("div",{staticClass:"myrot",on:{mousedown:function(e){return t.buttonDown(5,e)}}})])},A=[],D={data:function(){return{whichOne:0,pageX:0,pageY:0}},methods:{move:function(t,e,o,a){this.$refs.imgHandle.style.width=t+"px",this.$refs.imgHandle.style.height=e+"px",this.$refs.imgHandle.style.left=o+40+"px",this.$refs.imgHandle.style.top=a+40+"px"},delImg:function(){svgTool.delImg()},buttonDown:function(t,e){this.whichOne=t,this.pageX=e.pageX,this.pageY=e.pageY,this.$store.commit("setImageToolShow",!1),svgTool.needAddToHistory=!1,svgTool.loc=svgTool.currentImg.transform().local,svgTool.addHistoryStart({type:"matrix",matrix:svgTool.loc,image:svgTool.currentImg,key:svgTool.currentKey})}},created:function(){myVueApp.move=this.move;var t=this;window.addEventListener("mousemove",(function(e){var o,a,n,s,i;if(t.whichOne){switch(o=e.pageX-t.pageX,a=e.pageY-t.pageY,svgTool.needAddToHistory=!0,t.whichOne){case 1:n=svgTool.bbox.x2,s=svgTool.bbox.y2,o*=-1;break;case 2:n=svgTool.bbox.x,s=svgTool.bbox.y2;break;case 3:n=svgTool.bbox.x,s=svgTool.bbox.y;break;case 4:n=svgTool.bbox.x2,s=svgTool.bbox.y,o*=-1;break;case 5:n=svgTool.bbox.cx,s=svgTool.bbox.cy;break}5!==t.whichOne?(i=o/svgTool.currentSvg.ratio/svgTool.bbox.w+1,svgTool.computeM({type:"s",x:i,y:i,z:n,u:s})):(i=180*Math.atan2(-o,a+svgTool.bbox.h/2*svgTool.currentSvg.ratio)/Math.PI,svgTool.computeM({type:"r",x:i,y:n,z:s}))}})),window.addEventListener("mouseup",(function(e){t.whichOne&&(t.whichOne=0,t.$store.commit("setImageToolShow",!0),svgTool.needAddToHistory&&(svgTool.addToRenderLoop(svgTool.currentKey),svgTool.addHistoryEnd({type:"matrix",matrix:svgTool.currentImg.transform().local,image:svgTool.currentImg,key:svgTool.currentKey}),svgTool.bbox=svgTool.currentImg.getBBox(),svgTool.computedHandle()))}))},components:{},mounted:function(){}},j=D,M=(o("ab51"),Object(u["a"])(j,I,A,!1,null,null,null)),L=M.exports,N={methods:{},created:function(){},components:{imageHandle:L},mounted:function(){setTimeout((function(){svgTool.getSvgBox(),window.BLS&&window.BLS.init&&window.BLS.init(globalData.query.designid)}),601)}},P=N,E=(o("6e43"),Object(u["a"])(P,k,_,!1,null,null,null)),F=E.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"btnbox",style:{left:t.comLeft}},[o("div",{staticClass:"one-svgbtn",staticStyle:{height:"50px"},on:{click:function(e){return t.$store.commit("setSvgBoxShow",!t.$store.state.svgBoxShow)}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.svgBoxShow,expression:"!$store.state.svgBoxShow"}],attrs:{src:"/static/image/op.png",alt:"img"}}),o("img",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.svgBoxShow,expression:"$store.state.svgBoxShow"}],attrs:{src:"/static/image/op1.png",alt:"img"}})]),t._l(t.comHasIcon,(function(e,a){return o("div",{key:a,ref:a,refInFor:!0,staticClass:"one-svgbtn",class:{active:a===t.$store.state.whichSvg},attrs:{title:e},on:{click:function(e){return t.clickSvgBtn(a)}}})}))],2)},H=[],U={methods:{appendSvgIcon:function(t,e){this.$refs[t][0].appendChild(e)},clickSvgBtn:function(t,e){svgTool.cancelFun(),this.$store.state.svgBoxShow||this.$store.commit("setSvgBoxShow",!0),this.$store.state.svgKeys[t]&&this.$store.state.whichSvg!==t&&(this.$store.commit("setWhichSvg",t),svgTool.changeSvg(t),!e&&window.BLS&&window.BLS.rotation&&window.BLS.rotation(t))}},created:function(){var t=this;myVueApp.appendSvgIcon=this.appendSvgIcon,window.myVueApp.clikcPart=t.clickSvgBtn},components:{},mounted:function(){},computed:{comLeft:function(){var t;return t=this.$store.state.smallScreen?"446px":this.$store.state.svgBoxShow?"calc(50% + 224px)":"446px",t},comHasIcon:function(){var t={};for(var e in this.$store.state.svgKeys)this.$store.state.svgKeys[e].flag&&(t[e]=this.$store.state.svgKeys[e].title);return t}}},G=U,Y=(o("dd1d"),Object(u["a"])(G,R,H,!1,null,null,null)),K=Y.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.$store.state.whatTool,expression:"$store.state.whatTool===2"}],staticClass:"toolbox"},[o("div",{staticClass:"tooltop"},[t._v("Choose A File To Upload")]),o("div",{staticClass:"toolboxmain"},[o("div",{staticClass:"upload-box ovtext"},[o("div",{staticClass:"bgi"}),o("input",{attrs:{disabled:t.uploadState,type:"file",name:"upimg"},on:{change:t.uploadImg}})]),o("div",{staticClass:"uploadpicturebox"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadState,expression:"uploadState"}],staticClass:"one-picture-box"},[o("img",{staticClass:"one-picture",attrs:{src:"/static/image/loading2.gif",alt:"img"}})]),t._l(t.usesImgArr,(function(e,a){return o("div",{key:e.id,staticClass:"one-picture-box"},[o("img",{staticClass:"one-picture",staticStyle:{display:"none"},attrs:{src:e.img_100,alt:"img"},on:{load:t.loadingImage}}),o("img",{staticClass:"one-picture",attrs:{src:"/static/image/loading2.gif",alt:"img"}}),o("div",{staticClass:"one-picture-shade"},[o("img",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.imageTimes[e.id],expression:"!$store.state.imageTimes[item.id]"}],staticClass:"delbtn",attrs:{src:"/static/image/shanchu.svg",alt:"shanchu"},on:{click:function(o){return t.delPic(e.id,a)}}}),o("span",{staticClass:"addbtn",on:{click:function(o){return t.addImg(e.id,e.img)}}},[t._v("add")])])])}))],2)])])},W=[],V=(o("ac1f"),o("1276"),o("498a"),{data:function(){return{usesImgArr:[],uploadState:!1}},methods:{uploadImg:function(t){var e=t.target.files[0],o=e.type.trim().split("/");if(e){if("image"!=o[0]||"jpg"!=o[1]&&"jpeg"!=o[1]&&"png"!=o[1]&&"pneg"!=o[1]&&"svg+xml"!=o[1])return t.target.value="",void alert("Format must be jpg jpeg png pneg svg");if(e.size>10485760)return alert("The image size is greater than 10M"),void(t.target.value="");var a=new FormData;a.append("upimg",e),this.uploadState=!0}},delPic:function(t,e){},addImg:function(t,e){svgTool.addImg(e,t,"none")},loadingImage:function(t){t.target.style.display="block",$(t.target).siblings(".one-picture").remove()}},created:function(){},components:{},mounted:function(){}}),q=V,J=(o("fb70"),Object(u["a"])(q,z,W,!1,null,null,null)),X=J.exports,Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:3===t.$store.state.whatTool,expression:"$store.state.whatTool===3"}],staticClass:"toolbox"},[o("h3",{staticClass:"tooltop ovtext"},[t._v(t._s(t.$store.state.changeText?"Edit Text":"Add Text")+" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.changeText,expression:"$store.state.changeText"}],staticClass:"closebtn",on:{click:t.cl}})]),o("div",{staticClass:"toolboxmain"},[o("input",{staticClass:"textipt",attrs:{type:"text",placeholder:"Enter text here"},domProps:{value:t.$store.state.textObj.txt},on:{change:t.changeText}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.changeText,expression:"!$store.state.changeText"}],staticClass:"addtextbtn",on:{click:t.addText}},[t._v("Add To Design")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.changeText,expression:"$store.state.changeText"}]},[o("div",{staticClass:"oneopt ovtext",on:{click:function(e){return t.$store.commit("setFontShow",!0)}}},[o("div",{staticClass:"fonticobox"},[t.fontData?o("img",{attrs:{src:t.fontData[t.$store.state.textObj.font].ico,alt:"ico",title:t.fontData[t.$store.state.textObj.font].name}}):t._e()]),t._v("Font Family ")]),o("div",{staticClass:"oneopt ovtext",on:{click:t.openpantone}},[t._v("Text Color "),o("div",{staticClass:"myfr"},[t._v(" "+t._s(t.$store.state.textObj.pantone1)),o("span",{staticClass:"onepantone",staticStyle:{float:"right",margin:"20px 0 0 10px"},style:{backgroundColor:"#"+t.$store.state.textObj.fill_color}})])]),o("div",{staticClass:"oneopt ovtext",on:{click:function(e){return t.$store.commit("setOutlineShow",!0)}}},[t._v("Text Outline "),o("strong",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.textObj.stroke,expression:"!$store.state.textObj.stroke"}]},[t._v("Add Outline")]),o("div",{directives:[{name:"show",rawName:"v-show",value:!!t.$store.state.textObj.stroke,expression:"!!$store.state.textObj.stroke"}],staticClass:"myfr"},[o("span",{staticStyle:{float:"left"}},[t._v(t._s(t.$store.state.textObj.pantone2))]),o("span",{staticClass:"onepantone",staticStyle:{margin:"20px 0 0 10px"},style:{backgroundColor:"#"+t.$store.state.textObj.stroke}}),o("span",{staticClass:"line"}),o("span",{staticClass:"spcspan"},[t._v(t._s(t.$store.state.textObj.strokewidth))])])]),o("div",{staticClass:"oneopt ovtext",on:{click:function(e){return t.$store.commit("setShapeShow",!0)}}},[t._v("Text Shape "),o("strong",{directives:[{name:"show",rawName:"v-show",value:"NORMAl"===t.$store.state.textObj.text_shape,expression:"$store.state.textObj.text_shape==='NORMAl'"}]},[t._v("Add Text Shape")]),o("div",{directives:[{name:"show",rawName:"v-show",value:"NORMAl"!==t.$store.state.textObj.text_shape,expression:"$store.state.textObj.text_shape!=='NORMAl'"}],staticClass:"myfr"},[t.shapeData?o("img",{staticClass:"mypic",attrs:{src:t.shapeData[t.$store.state.textObj.text_shape],alt:"img"}}):t._e()])])])]),o("font-box",{attrs:{fontData:t.fontData}}),o("outline-box"),o("shape-box",{attrs:{shapeData:t.shapeData}})],1)},Z=[],tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.fontShow,expression:"$store.state.fontShow"}],staticClass:"toolbox ovtext"},[o("h3",{staticClass:"tooltop"},[t._v("Select The Font")]),o("div",{staticClass:"toolboxmain"},t._l(t.fontData,(function(e,a){return o("div",{key:a,staticClass:"one-font",class:{active:a===t.$store.state.textObj.font},attrs:{title:e.name},on:{click:function(e){return t.pickFont(a)}}},[o("img",{attrs:{src:e.ico,alt:"img"}})])})),0)])},et=[],ot={props:["fontData"],methods:{pickFont:function(t){if(this.$store.commit("setFontShow",!1),this.$store.state.textObj.font!==t){this.$store.commit("setTextObj",{key:"font",value:t});var e=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(t){svgTool.changeImg(t,e)}))}}},created:function(){},components:{},mounted:function(){}},at=ot,nt=(o("12ca"),Object(u["a"])(at,tt,et,!1,null,null,null)),st=nt.exports,it=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.outlineShow,expression:"$store.state.outlineShow"}],staticClass:"toolbox"},[o("h3",{staticClass:"tooltop ovtext"},[t._v("Text Outline "),o("div",{staticClass:"closebtn",on:{click:t.cl}})]),o("div",{staticClass:"toolboxmain"},[o("p",{staticClass:"myp ovtext"},[t._v("Choose Outline Thichness")]),o("slide",{attrs:{num:t.$store.state.textObj.strokewidth},on:{change1:t.change1,change2:t.change2}}),o("p",{staticClass:"myp ovtext"},[t._v("Choose Outline Color")]),t._l(t.$store.state.pantoneData,(function(e){return o("div",{key:e.rgb,staticClass:"onepantone",class:{active:e.rgb===t.$store.state.textObj.stroke},style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{mousedown:function(o){return t.clickColor(e,"color")}}},[o("div",{staticClass:"juanjiao"}),o("img",{staticClass:"gouxuan",attrs:{src:"/static/image/gouxuan.png",alt:"choise"}})])})),o("p",{staticClass:"latelyp ovtext"},[t._v("Recently Used Colors")]),t._l(t.$store.state.latelyColor,(function(e){return o("div",{key:e.pantone,staticClass:"onepantone",class:{active:e.rgb===t.$store.state.textObj.stroke},style:{backgroundColor:"#"+e.rgb},attrs:{title:e.pantone},on:{mousedown:function(o){return t.clickColor(e,"lately")}}},[o("div",{staticClass:"juanjiao"}),o("img",{staticClass:"gouxuan",attrs:{src:"/static/image/gouxuan.png",alt:"choise"}})])})),o("div",{staticClass:"addtextbtn",staticStyle:{float:"right",margin:"20px"},on:{click:t.cl}},[t._v("Done")]),o("div",{staticClass:"addtextbtn dellinebtn",class:{isdisabled:!t.$store.state.textObj.stroke},staticStyle:{float:"right",margin:"20px 0"},on:{click:t.deleteOutLine}},[t._v("Delete")])],2)])},rt=[],lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"slidebox"},[o("div",{ref:"slideBlock",staticClass:"slideblock"},[o("span",{staticClass:"smallpint",staticStyle:{left:"0"},on:{click:function(e){return t.clicksp(1)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"16.66%"},on:{click:function(e){return t.clicksp(2)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"33.33%"},on:{click:function(e){return t.clicksp(3)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"50%"},on:{click:function(e){return t.clicksp(4)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"66.66%"},on:{click:function(e){return t.clicksp(5)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"83.33%"},on:{click:function(e){return t.clicksp(6)}}}),o("span",{staticClass:"smallpint",staticStyle:{left:"100%"},on:{click:function(e){return t.clicksp(7)}}}),o("div",{staticClass:"slidepoint",class:{active:t.startFlag},style:{left:t.comLeft},on:{mousedown:t.slideStart}})])])},ct=[],ut={data:function(){return{slideStepW:58,startX:0,moveX:0,nowNum:0,startNum:0,startFlag:!1}},props:["num"],methods:{slideStart:function(t){this.startFlag=!0,this.startX=t.pageX,this.startNum=1*this.num,this.moveX=0,this.nowNum=0,document.body.style.cursor="grabbing"},clicksp:function(t){this.$emit("change1",t),this.$emit("change2")}},created:function(){var t=this;window.addEventListener("mousemove",(function(e){var o;t.startFlag&&(o=e.pageX-t.startX,Math.abs(o-t.moveX)>t.slideStepW>>1&&(o-t.moveX>0?t.nowNum++:t.nowNum--,t.startNum+t.nowNum<8&&t.startNum+t.nowNum>0&&(t.moveX=t.slideStepW*t.nowNum,t.$emit("change1",t.startNum+t.nowNum))))})),window.addEventListener("mouseup",(function(e){t.startFlag&&(t.startFlag=!1,document.body.style.cursor="default",1*t.num!==t.startNum&&t.$emit("change2"))}))},computed:{comLeft:function(){return Math.ceil((this.num-1)/6*100)+"%"}},components:{},mounted:function(){}},gt=ut,mt=(o("2b67"),Object(u["a"])(gt,lt,ct,!1,null,null,null)),dt=mt.exports,ht={methods:{change1:function(t){myStore.commit("setTextObj",{key:"strokewidth",value:t+""})},change2:function(){if(""!==this.$store.state.textObj.stroke){var t=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(e){svgTool.changeImg(e,t)}))}},clickColor:function(t,e){if(this.$store.state.textObj.stroke!==t.rgb){"color"===e&&this.$store.commit("addLatelyColor",t),this.$store.commit("setTextObj",{key:"stroke",value:t.rgb}),this.$store.commit("setTextObj",{key:"pantone2",value:t.pantone});var o=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(t){svgTool.changeImg(t,o)}))}},cl:function(){this.$store.commit("setOutlineShow",!1)},deleteOutLine:function(){if(this.$store.state.textObj.stroke){this.$store.commit("setTextObj",{key:"stroke",value:""}),this.$store.commit("setTextObj",{key:"pantone2",value:""});var t=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(e){svgTool.changeImg(e,t)}))}}},created:function(){},computed:{},components:{slide:dt},mounted:function(){}},pt=ht,vt=Object(u["a"])(pt,it,rt,!1,null,null,null),ft=vt.exports,bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.shapeShow,expression:"$store.state.shapeShow"}],staticClass:"toolbox"},[o("h3",{staticClass:"tooltop ovtext"},[t._v("Text Shape "),o("div",{staticClass:"closebtn",on:{click:t.cl}})]),o("div",{staticClass:"toolboxmain"},[o("div",{staticClass:"shapeoptbox"},t._l(t.shapeData,(function(e,a){return o("div",{key:a,staticClass:"oneshape",class:{active:a===t.$store.state.textObj.text_shape},attrs:{title:a},on:{click:function(e){return t.clickShape(a)}}},[o("img",{staticClass:"one-picture",staticStyle:{display:"none"},attrs:{src:e,alt:"shape"},on:{load:t.loadingImage}}),o("img",{staticClass:"one-picture",attrs:{src:"/static/image/loading2.gif",alt:"img"}})])})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:"NORMAl"!==t.$store.state.textObj.text_shape,expression:"$store.state.textObj.text_shape!=='NORMAl'"}]},[o("p",{staticClass:"myp ovtext"},[t._v("Choose Outline Thichness")]),o("slide",{attrs:{num:t.$store.state.textObj.shape_set},on:{change1:t.change1,change2:t.change2}})],1),o("div",{staticClass:"addtextbtn",on:{click:t.cl}},[t._v("Done")])])])},wt=[],yt={props:["shapeData"],methods:{clickShape:function(t){if(t!==this.$store.state.textObj.text_shape){this.$store.commit("setTextObj",{key:"text_shape",value:t});var e=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(t){svgTool.changeImg(t,e)}))}},loadingImage:function(t){t.target.style.display="block",$(t.target).siblings(".one-picture").remove()},change1:function(t){myStore.commit("setTextObj",{key:"shape_set",value:t+""})},change2:function(){if("NORMAl"!==this.$store.state.textObj.text_shape){var t=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(e){svgTool.changeImg(e,t)}))}},cl:function(){this.$store.commit("setShapeShow",!1)}},created:function(){},components:{slide:dt},mounted:function(){}},xt=yt,Ct=(o("8b5b"),Object(u["a"])(xt,bt,wt,!1,null,null,null)),St=Ct.exports,Tt={data:function(){return{fontData:null,shapeData:null}},methods:{addText:function(){if(this.$store.state.textObj.txt){var t=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(e){svgTool.addImg(e,"text",t)}))}},changeText:function(t){if(t.target.value){if(this.$store.commit("setTextObj",{key:"txt",value:t.target.value}),1===svgTool.cancelLate&&(svgTool.cancelLate=2),this.$store.state.changeText){var e=encodeURIComponent(JSON.stringify(this.$store.state.textObj));getFontPic(this.$store.state.textObj,(function(t){svgTool.changeImg(t,e)}))}}else t.target.value=this.$store.state.textObj.txt},openpantone:function(){this.$store.commit("setPantoneBoxShow",!0),this.$store.commit("setChoisePantone",{rgb:this.$store.state.textObj.fill_color,pantone:this.$store.state.textObj.pantone1}),this.$store.commit("setColorTitle","Font Colors")},cl:function(){svgTool.cancelFun()}},created:function(){var t=[globalData.uuid,this.$store.state.salt].sort().join("");abcde(t),globalData.uuid},components:{fontBox:st,outlineBox:ft,shapeBox:St},mounted:function(){},computed:{}},Bt=Tt,$t=(o("36e8"),Object(u["a"])(Bt,Q,Z,!1,null,null,null)),Ot=$t.exports,kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"nav"},[o("div",{staticClass:"navbtn",class:{active:1===t.$store.state.whatTool},staticStyle:{"background-position-y":"-408px"},on:{click:function(e){return t.choiseTool(1)}}}),o("div",{staticClass:"navbtn",class:{active:2===t.$store.state.whatTool},staticStyle:{"background-position-y":"-270px"},on:{click:function(e){return t.choiseTool(2)}}}),o("div",{staticClass:"navbtn",class:{active:5===t.$store.state.whatTool},staticStyle:{"background-position-y":"-508px"},on:{click:function(e){return t.choiseTool(5)}}}),o("div",{staticClass:"navbtn",class:{active:3===t.$store.state.whatTool},staticStyle:{"background-position-y":"-135px"},on:{click:function(e){return t.choiseTool(3)}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.categoriesTabShow,expression:"$store.state.categoriesTabShow"}],staticClass:"navbtn",class:{active:4===t.$store.state.whatTool},staticStyle:{"background-position-y":"-5px"},on:{click:function(e){return t.choiseTool(4)}}})])},_t=[],It={methods:{choiseTool:function(t){this.$store.commit("setWhatTool",t),this.$store.state.svgBoxShow||this.$store.commit("setSvgBoxShow",!0)}},created:function(){},components:{},mounted:function(){}},At=It,Dt=(o("48e4"),Object(u["a"])(At,kt,_t,!1,null,null,null)),jt=Dt.exports,Mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mycanvas",style:t.comBoxStyle,attrs:{id:"mycanvas"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.smallScreen&&t.$store.state.svgBoxShow,expression:"$store.state.smallScreen&&$store.state.svgBoxShow"}],staticClass:"canvastitle"},[o("span",{staticClass:"leastbtn",on:{click:function(e){t.least=!t.least}}},[t._v(t._s(t.least?"+":"-"))]),o("h3",[t._v("Preview")]),o("span",{staticClass:"largestbtn",on:{click:function(e){return t.$store.commit("setSvgBoxShow",!1)}}})]),o("canvas",{attrs:{id:"canvasbox",ondragstart:"return false",oncontextmenu:"return false",onselectstart:"return false"}}),o("div",{staticClass:"insidebtnbox"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.smallScreen&&!t.$store.state.svgBoxShow,expression:"$store.state.smallScreen&&!$store.state.svgBoxShow"}],staticClass:"bi",on:{click:function(e){return t.$store.commit("setSvgBoxShow",!0)}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.title&&(!t.$store.state.smallScreen||!t.$store.state.svgBoxShow),expression:"$store.state.title&&(!$store.state.smallScreen||!$store.state.svgBoxShow)"}],staticClass:"sharebtn",on:{click:t.showShare}})]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.canvasLoading,expression:"$store.state.canvasLoading"}],staticClass:"shade"},[o("div",{staticClass:"progress"},[o("div",{ref:"progressbar",staticClass:"progress-bar"})])])])},Lt=[],Nt={data:function(){return{least:!1}},methods:{showShare:function(){$("#mysharebox").append($("#canvasbox")),this.$store.commit("setShadeState",5),this.$nextTick((function(){window.BLS&&window.BLS.resize&&window.BLS.resize()}))}},created:function(){},components:{},mounted:function(){var t=this;window.perFun=function(e){e?globalData.preTimer=setInterval((function(){t.$refs.progressbar.style.width=100-100/++globalData.preX+"%"}),1500):(globalData.preX=1,clearInterval(globalData.preTimer),t.$refs.progressbar.style.width=0,globalData.preTimer=null)}},computed:{comBoxStyle:function(){var t={width:"100%",height:"100%"};return this.$store.state.smallScreen?this.$store.state.svgBoxShow?(t.width="220px",this.least?t.height="30px":t.height="250px"):(t.width="calc(100% - 446px)",t.height="100%"):(t.height="100%",this.$store.state.svgBoxShow?t.width="calc(50% - 223px)":t.width="calc(100% - 446px)"),globalData.count=0,globalData.timer||(globalData.timer=setInterval((function(){window.BLS&&window.BLS.resize&&window.BLS.resize(),++globalData.count>5&&(clearInterval(globalData.timer),globalData.timer=null)}),89)),t}}},Pt=Nt,Et=(o("f933"),Object(u["a"])(Pt,Mt,Lt,!1,null,null,null)),Ft=Et.exports,Rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.$store.state.whatTool,expression:"$store.state.whatTool===4"}],ref:"scrollbox",staticClass:"toolbox",staticStyle:{"overflow-y":"scroll"}},t._l(t.myCategories,(function(e,a){return o("div",{key:a,staticClass:"categoriesbox",style:{maxHeight:-1!==t.viewCa.indexOf(a)?"1500px":"54px"}},[o("div",{staticClass:"catitle",on:{click:function(e){return t.clicktitle(a)}}},[t._v(" "+t._s(a)+" "),o("img",{directives:[{name:"show",rawName:"v-show",value:-1===t.viewCa.indexOf(a),expression:"viewCa.indexOf(index) === -1"}],staticClass:"catitleimg",attrs:{src:"/static/image/op.png",alt:"img"}}),o("img",{directives:[{name:"show",rawName:"v-show",value:-1!==t.viewCa.indexOf(a),expression:"viewCa.indexOf(index) !== -1"}],staticClass:"catitleimg",attrs:{src:"/static/image/op2.png",alt:"img"}})]),o("div",{staticClass:"clearfix"},t._l(e,(function(e,a){return o("div",{key:a,staticClass:"onedesign",staticStyle:{cursor:"pointer"},attrs:{title:e.name},on:{click:function(o){return t.chioseProduct(e.designid,e.product_id)}}},[o("img",{attrs:{src:e.image,alt:"img",width:"200",height:"200"}}),o("p",{staticClass:"ovtext"},[t._v(t._s(e.name))])])})),0)])})),0)},Ht=[],Ut=(o("c975"),{data:function(){return{myCategories:{},viewCa:[]}},methods:{chioseProduct:function(t,e){globalData.toDesign=t,globalData.toProduct=e,this.$store.commit("setShadeState",6)},clicktitle:function(t){var e=this.viewCa.indexOf(t);-1===e?this.viewCa.push(t):this.viewCa.splice(e,1)}},components:{},created:function(){},computed:{}}),Gt=Ut,Yt=(o("7e8e"),Object(u["a"])(Gt,Rt,Ht,!1,null,null,null)),Kt=Yt.exports,zt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:5===t.$store.state.whatTool,expression:"$store.state.whatTool===5"}],staticClass:"toolbox"},t._l(t.commonImages,(function(e){return o("div",{key:e.name,staticClass:"one-picture-box"},[o("img",{staticClass:"one-picture",staticStyle:{display:"none"},attrs:{src:e.thumb,alt:"img"},on:{load:t.loadingImage}}),o("img",{staticClass:"one-picture",attrs:{src:"/static/image/loading2.gif",alt:"img"}}),o("div",{staticClass:"one-picture-shade"},[o("span",{staticClass:"addbtn",on:{click:function(o){return t.addCommonImage(e.href)}}},[t._v("add")])])])})),0)},Wt=[],Vt={data:function(){return{page:1,commonImages:[],total:0}},methods:{loadingImage:function(t){t.target.style.display="block",$(t.target).siblings(".one-picture").remove()},addCommonImage:function(t){var e=encodeURIComponent(JSON.stringify({url:t,color:""}));svgTool.addImg(t,"common",e)},getdata:function(){}},components:{},created:function(){this.getdata()}},qt=Vt,Jt=Object(u["a"])(qt,zt,Wt,!1,null,null,null),Xt=Jt.exports,Qt={methods:{},created:function(){},components:{colorTool:y,pantoneBox:O,svgBox:F,btnBox:K,pictureBox:X,textBox:Ot,navBox:jt,canvasBox:Ft,categories:Kt,commonImages:Xt},mounted:function(){}},Zt=Qt,te=(o("d969"),Object(u["a"])(Zt,d,h,!1,null,null,null)),ee=te.exports,oe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"toolbar",on:{mousedown:function(t){t.stopPropagation()}}},[o("div",{staticClass:"spritebtn active",staticStyle:{"background-position-x":"0px"},on:{click:t.save}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.canUndo},staticStyle:{"background-position-x":"-68px"},attrs:{title:"ctrl+z"},on:{click:t.undo}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.canRedo},staticStyle:{"background-position-x":"-136px","border-right":"1px solid #DBD9DA"},attrs:{title:"ctrl+y"},on:{click:t.redo}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-204px"},on:{click:function(e){return t.full(!1)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-272px"},on:{click:function(e){return t.full(!0)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-340px"},on:{click:function(e){return t.mirrorM(!1)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-408px"},on:{click:function(e){return t.mirrorM(!0)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-476px"},on:{click:function(e){return t.layer(!1)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-544px"},on:{click:function(e){return t.layer(!0)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-612px"},on:{click:t.copyStepOne}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.copyBoxShow,expression:"$store.state.copyBoxShow"}],staticClass:"copybox"},t._l(t.$store.state.svgKeys,(function(e,a){return o("div",{key:a,staticClass:"single",class:{active:a===t.$store.state.whichSvg},on:{click:function(e){return t.copyTo(a)}}},[o("div",{ref:a,refInFor:!0,staticClass:"singlecanvas"}),o("div",{staticClass:"singletitle ovtext"},[t._v(t._s(e.title))])])})),0),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-680px"},on:{click:function(e){return t.align(!1)}}}),o("div",{staticClass:"spritebtn",class:{active:t.$store.state.imageToolShow},staticStyle:{"background-position-x":"-748px"},on:{click:function(e){return t.align(!0)}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.commonColorBtn,expression:"$store.state.commonColorBtn"}],attrs:{id:"colorselector"}}),o("div",{staticClass:"wenhao",on:{click:function(e){return t.$store.commit("setShadeState",1)}}},[t._v("?")])])},ae=[],ne={methods:{undo:function(){this.$store.state.canUndo&&svgTool.undo()},redo:function(){this.$store.state.canRedo&&svgTool.redo()},clearBox:function(t){this.$refs[t][0].innerHTML=""},appendCanvas:function(t,e){this.$refs[t][0].appendChild(e)},mirrorM:function(t){this.$store.state.imageToolShow&&(this.$store.commit("setCopyBoxShow",!1),svgTool.mirrorM(t))},full:function(t){this.$store.state.imageToolShow&&(this.$store.commit("setCopyBoxShow",!1),svgTool.fullSvg(t))},layer:function(t){this.$store.state.imageToolShow&&(this.$store.commit("setCopyBoxShow",!1),svgTool.layerCtrl(t,!0))},copyTo:function(t){this.$store.state.imageToolShow&&(this.$store.commit("setCopyBoxShow",!1),svgTool.copyTo(t))},copyStepOne:function(){this.$store.state.imageToolShow&&this.$store.commit("setCopyBoxShow",!this.$store.state.copyBoxShow)},save:function(){if(this.$store.state.canvasLoading)return alert("Unable to save during loading");"tontos"===globalData.query.scene&&""===this.$store.state.title?this.$store.commit("setShadeState",2):(this.$store.commit("setShadeState",3),saveInServer((function(){window.myStore.commit("setShadeState",0),"shop"===globalData.query.scene&&""===myStore.state.title&&window.parent&&window.parent.product&&window.parent.product.addtocart(globalData.query.product_id,globalData.saveDesign,!1)})))},align:function(t){this.$store.state.imageToolShow&&svgTool.alignSvg(t)},clickColorTool:function(){$("#colorselector").ColorPickerShow()}},created:function(){myVueApp.appendCanvas=this.appendCanvas,myVueApp.clearBox=this.clearBox,window.addEventListener("keydown",(function(t){17===t.keyCode&&(window.ctrlKeyDown=!0)})),window.addEventListener("keyup",(function(t){17===t.keyCode?window.ctrlKeyDown=!1:window.ctrlKeyDown&&90===t.keyCode&&myStore.state.canUndo?svgTool.undo():window.ctrlKeyDown&&89===t.keyCode&&myStore.state.canRedo&&svgTool.redo()}))},mounted:function(){$("#colorselector").ColorPicker({color:"#0000ff",onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,e,o){var a=JSON.parse(decodeURIComponent(svgTool.currentImg.attr("myuri")));changeCommonImageColor(a.url,[o.r,o.g,o.b],(function(t,e){a.color=e.join(",");var o=encodeURIComponent(JSON.stringify(a));svgTool.changeImg(t,o)}))}})}},se=ne,ie=(o("97c4"),Object(u["a"])(se,oe,ae,!1,null,null,null)),re=ie.exports,le=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.shadeState,expression:"$store.state.shadeState === 1"}],staticClass:"helpbox"},[t._m(0),t._m(1),t._m(2),t._m(3),o("div",{on:{click:function(e){return t.$store.commit("setShadeState",0)}}},[t._v("i got it!")])])},ce=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[o("img",{attrs:{src:"/static/image/moxing.png",alt:"img"}}),t._v("click the cuttng piece to find out more")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[o("img",{attrs:{src:"/static/image/left-jiang.png",alt:"img"}}),t._v("left click the modle for rotating")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[o("img",{attrs:{src:"/static/image/right-jiang.png",alt:"img"}}),t._v("right click the modle for moving")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[o("img",{attrs:{src:"/static/image/center-jiang.png",alt:"img"}}),t._v("slide the mouse to zoom in and out")])}],ue={methods:{},created:function(){},components:{},mounted:function(){}},ge=ue,me=(o("d577"),Object(u["a"])(ge,le,ce,!1,null,null,null)),de=me.exports,he=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.$store.state.shadeState,expression:"$store.state.shadeState === 2"}],staticClass:"savebox"},[o("div",{staticClass:"savetitle"},[t._v("Name of design")]),o("div",{staticClass:"closesave",on:{click:function(e){return t.$store.commit("setShadeState",0)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.designName,expression:"designName"}],staticClass:"textipt",staticStyle:{margin:"70px auto"},attrs:{type:"text",placeholder:"Enter text here"},domProps:{value:t.designName},on:{input:function(e){e.target.composing||(t.designName=e.target.value)}}}),o("div",{staticClass:"addtextbtn",staticStyle:{margin:"0 auto"},on:{click:t.saveFirst}},[t._v("Add To Design")])])},pe=[],ve={data:function(){return{designName:""}},methods:{saveFirst:function(){""!==this.designName&&(this.$store.commit("setShadeState",3),globalData.saveObj.title=this.designName,this.$store.commit("setTitle",this.designName),saveInServer((function(){})))}},created:function(){},components:{},mounted:function(){}},fe=ve,be=Object(u["a"])(fe,he,pe,!1,null,null,null),we=be.exports,ye=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:3===t.$store.state.shadeState,expression:"$store.state.shadeState === 3"}],staticClass:"loadingbox"},[o("img",{staticClass:"loadingimg",attrs:{src:"/static/image/loading2.gif",alt:"img"}}),o("div",{staticClass:"loadingtext"},[t._v("loading...")])])},xe=[],Ce={methods:{},created:function(){},components:{},mounted:function(){}},Se=Ce,Te=(o("d3fd"),Object(u["a"])(Se,ye,xe,!1,null,null,null)),Be=Te.exports,$e=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.$store.state.shadeState||6===t.$store.state.shadeState,expression:"$store.state.shadeState === 4 || $store.state.shadeState ===6"}],staticClass:"savebox"},[o("div",{staticClass:"savetitle"},[t._v("Warm tips")]),o("div",{staticClass:"closesave",on:{click:function(e){return t.$store.commit("setShadeState",0)}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.$store.state.shadeState,expression:"$store.state.shadeState === 4"}],staticStyle:{height:"190px","font-size":"20px","line-height":"190px"}},[t._v(" "+t._s(""===t.$store.state.title?"Your design has not been saved!Save or leave?":"You have finished your design.Inquiry or leave?")+" ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:6===t.$store.state.shadeState,expression:"$store.state.shadeState === 6"}],staticStyle:{height:"190px","font-size":"20px","line-height":"190px"}},[t._v(" Are you sure you want to leave this model? ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.$store.state.shadeState,expression:"$store.state.shadeState === 4"}],staticClass:"addtextbtn spcbtn leavebtn",on:{click:t.leave}},[t._v("Leave")]),o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.$store.state.shadeState,expression:"$store.state.shadeState === 4"}],staticClass:"addtextbtn spcbtn surebtn",on:{click:t.saveOrInquiry}},[t._v(" "+t._s(""===t.$store.state.title?"Save":"Inquiry")+" ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:6===t.$store.state.shadeState,expression:"$store.state.shadeState === 6"}],staticClass:"addtextbtn spcbtn leavebtn",on:{click:t.handleConfirm}},[t._v("Confirm")]),o("div",{directives:[{name:"show",rawName:"v-show",value:6===t.$store.state.shadeState,expression:"$store.state.shadeState === 6"}],staticClass:"addtextbtn spcbtn surebtn",on:{click:function(e){return t.$store.commit("setShadeState",0)}}},[t._v("Cancel")])])},Oe=[],ke={methods:{leave:function(){window.parent&&window.parent.product&&window.parent.product.closedesign&&window.parent.product.closedesign()},saveOrInquiry:function(){""===this.$store.state.title?(this.$store.commit("setShadeState",3),saveInServer((function(){window.myStore.commit("setShadeState",3),window.parent&&window.parent.product&&window.parent.product.addtocart(globalData.query.product_id,globalData.saveDesign,!0)}))):window.parent&&window.parent.product&&window.parent.product.clickInquiry&&window.parent.product.clickInquiry()},handleConfirm:function(){this.$store.commit("initVue"),svgTool.init(),initConfig({designid:globalData.toDesign,product_id:globalData.toProduct}),window.BLS&&window.BLS.getResourceById&&window.BLS.getResourceById(globalData.toDesign)}},created:function(){},components:{},mounted:function(){}},_e=ke,Ie=(o("d81e"),Object(u["a"])(_e,$e,Oe,!1,null,null,null)),Ae=Ie.exports,De=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:5===t.$store.state.shadeState,expression:"$store.state.shadeState === 5"}],staticClass:"sharebox"},[o("div",{staticClass:"closesave",on:{click:t.closeShare}}),o("div",{staticClass:"sharetitle",attrs:{id:"sharetitle"}},[t._v(t._s(t.$store.state.title))]),o("div",{attrs:{id:"mysharebox"}}),o("div",{staticClass:"a2a_kit a2a_kit_size_32 a2a_default_style sharebottom",attrs:{"data-a2a-url":t.$store.state.shareUrl}},[o("a",{staticClass:"a2a_button_facebook"}),o("a",{staticClass:"a2a_button_twitter"}),o("a",{staticClass:"a2a_button_linkedin"}),o("a",{staticClass:"a2a_button_pinterest"})])])},je=[],Me={data:function(){return{}},methods:{closeShare:function(){$("#mycanvas").append($("#canvasbox")),this.$store.commit("setShadeState",0),this.$nextTick((function(){window.BLS&&window.BLS.resize&&window.BLS.resize()}))}},components:{},created:function(){}},Le=Me,Ne=(o("d503"),Object(u["a"])(Le,De,je,!1,null,null,null)),Pe=Ne.exports,Ee={data:function(){return{}},methods:{},created:function(){},components:{mytop:m,mymain:ee,toolBar:re,helpBox:de,saveBox:we,loadingBox:Be,warmPrompt:Ae,shareBox:Pe},mounted:function(){window.parent&&window.parent.perLoadingHide&&window.parent.perLoadingHide(),this.$store.commit("setSmallScreen",window.innerWidth<1367),window.myTimerSpc=null,window.addEventListener("resize",(function(){svgTool.cancelFun(),myStore.commit("setSmallScreen",window.innerWidth<1367),window.myTimerSpc&&clearTimeout(window.myTimerSpc),window.myTimerSpc=setTimeout((function(){var t=$("#svgbox"),e=t.width(),o=t.height();for(var a in svgTool.container)svgTool.getRatio(svgTool.container[a],e,o);window.myTimerSpc=null}),600)})),window.addEventListener("mousedown",(function(t){3===myStore.state.whatTool&&svgTool.currentImg&&"text"===svgTool.currentImg.attr("imgid")?(svgTool.cancelLate=1,setTimeout((function(){1===svgTool.cancelLate&&(svgTool.cancelLate=0,svgTool.cancelFun())}),200)):svgTool.cancelFun()}))}},Fe=Ee,Re=(o("239d"),Object(u["a"])(Fe,n,s,!1,null,null,null)),He=Re.exports,Ue=o("2f62"),Ge=(o("0d03"),o("d3b7"),o("25f0"),o("5319"),o("841c"),"tontossport.com"),Ye="https://diy."+Ge,Ke="https://text."+Ge,ze="https://c2m."+Ge,We="https://www."+Ge;function Ve(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,o="x"==t?e:3&e|8;return o.toString(16)}))}window.globalData={query:{designid:"7970",title:"a14c0bf1-7058-41d3-ba19-14307fe63d13",bz_edit:"0",scenee:"shop"},myDomain:Ge,count:0,timer:null,uuid:null,saveObj:{},saveDesign:"0",base1:Ye,base2:Ke,base3:Ye+"/static/share.php",base4:We,base5:ze+"/home/myfile",preX:1,preTimer:null,toDesign:"",toProduct:""},globalData.uuid=localStorage.getItem("uuid"),globalData.uuid||(globalData.uuid=Ve(),localStorage.setItem("uuid",globalData.uuid)),window.resourceUrl={getMoldById:Ye+"/model/design",getPantone:Ye+"/color/pantone",getImage:Ye+"/draw/getimg?sid="+globalData.uuid+"&type=4&designid="+globalData.query.designid,uploadImage:Ye+"/draw/upimg?sid="+globalData.uuid+"&type=4&designid="+globalData.query.designid,deleteImage:Ye+"/draw/removeimage?sid"+globalData.uuid+"&id=",getBaseImage:Ye+"/draw/SysImage?page=",getFonts:Ke+"/api/get_fonts",buildFontImage:Ke+"/api/build_font_images",saveC2m:ze+"/api/design/save",createDesignId:Ye+"/save/design",savePng:Ye+"/save/effect",saveSvg:Ye+"/save/svg",getCategories:We+"/index.php?route=common/menu&ajax=1",getCommonImages:We+"/index.php?route=common/home/images"},window.getSaveObj=function(t){globalData.saveObj.designid=globalData.query.designid,globalData.saveObj.sid=globalData.uuid,"tontos"===globalData.query.scene?"0"===globalData.query.bz_edit?globalData.saveObj.title="":(globalData.saveObj.title=t,window.myStore.commit("setTitle",t),globalData.saveDesign=globalData.query.designid,window.myStore.commit("setShareUrl",globalData.saveDesign)):"0"===globalData.query.bz_edit?globalData.saveObj.title=Ve():(globalData.saveObj.title=t,window.myStore.commit("setTitle",decodeURI(globalData.query.title)),globalData.saveDesign=globalData.query.designid,window.myStore.commit("setShareUrl",globalData.saveDesign))};var qe=null,Je=null,Xe=0;function Qe(t){var e;for(var o in Xe=2,imgSize="tontos"===globalData.query.scene?800:500,window.BLS.saveImage(Xe,(function(t,e){var o={};o.designid=globalData.saveDesign,o.sn=e,o.data=t,$.post(resourceUrl.savePng,o,(function(){Xe--}))}),imgSize),svgTool.container)Xe++,e={},e.designid=globalData.saveDesign,e.svgname=o,e.part_id=o,e.svg=svgTool.getSvgStr(svgTool.container[o],o,!0),$.post(resourceUrl.saveSvg,e,(function(){Xe--}));for(var a in window.BLS.NotEditData)Xe++,e={},e.designid=globalData.saveDesign,e.svgname=a,e.part_id=a,e.svg=window.BLS.NotEditData[a],e.isurl=1,$.post(resourceUrl.saveSvg,e,(function(){Xe--}));Je=setInterval((function(){Xe<1&&(clearInterval(Je),Je=null,t&&t())}),509)}window.saveInServer=function(t){"0"!==globalData.saveDesign||qe?"0"===globalData.saveDesign||Je||Qe(t):($.get(resourceUrl.createDesignId,globalData.saveObj,(function(t){globalData.saveDesign=JSON.parse(t).newDesignId,window.myStore.commit("setShareUrl",globalData.saveDesign)})),qe=setInterval((function(){"0"!==globalData.saveDesign&&(clearInterval(qe),Qe(t))}),97))},window.initConfig=function(t){globalData.saveDesign="0",qe=null,globalData.query.product_id=t.product_id,globalData.query.designid=t.designid,globalData.saveObj.title=Ve(),globalData.saveObj.designid=t.designid};o("caad"),o("2532");var Ze={container:{},currentKey:"",currentSvg:null,currentPart:null,fristTime:!0,dom:null,boxW:0,boxH:0,svgShowed:!1,svgMaxSize:1024,getSvgBox:function(){this.dom=$("#svgbox"),this.boxW=this.dom.width(),this.boxH=this.dom.height()},loadSvg:function(t,e,o,a,n,s){t+="",myStore.commit("addSvgKeys",{key:t,title:n,flag:!!o}),o&&Snap.load(o,(function(e){var o=e.select("svg");if(o){myVueApp.appendSvgIcon&&myVueApp.appendSvgIcon(t,o.node),o.attr("id","icon"+t);var a=o.selectAll("*"),n=0,s=a.length,i=null;for(n;n<s;n++)i=a[n].attr("fill"),"string"===typeof i&&"#595757"===Snap.getRGB(i).hex&&a[n].attr({class:"spc",fill:"#999999"})}else console.error("iconSvg is null")})),Snap.load(e,(function(e){var o,n=this.container[t]=e.select("svg"),i=0,r=10,l=null;if(n){if(this.dom.append(n.node),this.getWH(n),this.getRatio(n,this.boxW,this.boxH),n.attr("id","svg"+t),this.createCanvas(t,n,s),n.caipian=n.select("#id"+t+"caipian"),n.caipian?n.caipian.attr("id","caipian"+t):n.caipian=n.select("#caipian"+t),n.caipian)this.fristTime=!1,this.getClipG(t,n);else{for(i;i<r;i++)if(o=i?"_"+i+"_":"",n.caipian=n.select("#caipian"+o),n.caipian)break;if(!n.caipian)for(l=n.selectAll("*"),i=0,r=l.length,i;i<r;i++)if(!this.noColorEls.includes(l[i].type)){n.caipian=l[i];break}this.fristTime=!0,n.caipian.attr({id:"caipian"+t,strokeWidth:5,strokeDasharray:26}),"none"===n.caipian.attr("fill")&&n.caipian.attr("fill","#ffffff"),this.createClip(t,n),this.compatible(t,n)}n.caipian.attr("stroke","#333399"),this.reSetImg(n),this.searchEls(t,n),!this.svgShowed&&a?(myStore.commit("setWhichSvg",t),this.svgShowed=!0,this.currentKey=t,this.currentSvg=n):n.attr("display","none"),this.addToRenderLoop(t)}else console.error("svg null")}),this)},changeSvg:function(t){this.currentSvg&&this.currentSvg.attr("display","none"),this.currentSvg=this.container[t].attr("display","block"),this.currentKey=t},getWH:function(t){var e=t.attr("viewBox"),o=0|e.width,a=0|e.height,n=o>a?this.svgMaxSize/o:this.svgMaxSize/a;t.svgW=o,t.svgH=a,t.myScale=n,t.attr({height:t.myScale*t.svgH|0,width:t.myScale*t.svgW|0})},getRatio:function(t,e,o){var a=1,n=1;a=e/t.svgW,n=o/t.svgH,t.startX=t.startY=0,a<n?(t.ratio=a,t.startY=o-t.svgH*t.ratio>>1):(t.ratio=n,t.startX=e-t.svgW*t.ratio>>1)},triggerPart:function(t){this.currentPart&&this.currentPart.attr("stroke","none"),t&&t!==this.currentSvg.caipian&&(t.attr({stroke:"#333399",strokeWidth:5,strokeDasharray:26}),this.currentPart=t)},compatible:function(t,e){var o,a,n,s,i,r,l=e.selectAll("image"),c=0,u=l.length;if(r=e.paper.select("#clip_path"+t),r)for(r.parent().remove(),c;c<u;c++)l[c].attr("data_type")&&(o=l[c].attr("data_type"),"2"===o?l[c].parent().parent().parent().parent().remove():("3"===o?a="default":"4"===o&&(a=l[c].attr("data_id")),i=l[c].attr("xlink:href").replace("http:","https:"),l[c].attr("xlink:href",i),n=l[c].transform().totalMatrix,l[c].parent().parent().parent().parent().remove(),s=e.clipG.g(l[c]),s.transform(n),s.attr({imgid:a,dataurl:i})))}},to=Ze,eo={canvasObj:{},renderLoop:{},loopTimeout:null},oo='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',ao=40,no="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";eo.createCanvas=function(t,e,o){this.canvasObj[t]=document.createElement("canvas"),myStore.state.svgKeys[t]&&this.calcCanvasTransform(t,e),o&&o(t,this.canvasObj[t])},eo.getSvgStr=function(t,e,o){var a,n,s,i,r,l,c,u;if(t.caipian.attr("stroke","none"),e===this.currentKey&&this.currentPart&&this.currentPart.attr("stroke","none"),this.currentKey!==e&&t.attr("display","block"),o)for(t.attr({height:t.svgH,width:t.svgW}),n=t.selectAll("g"),u=[],i=n.length,s=0,s;s<i;s++)r=n[s].attr("imgid"),"common"===r&&(l=JSON.parse(decodeURIComponent(n[s].attr("myuri"))),l.color&&(u.push(n[s]),n[s].attr("dataurl",no),c=n[s].select("image"),c.attr("href")?c.attr("href",no):c.attr("xlink:href",no)));if(a=oo+t.toString().replace(/ns[\d]*:href/gi,"xlink:href"),t.caipian.attr("stroke","#333399"),e===this.currentKey&&this.currentPart&&this.currentPart.attr("stroke","#333399"),this.currentKey!==e&&t.attr("display","none"),u&&u.length)for(i=u.length,s=0;s<i;s++)l=JSON.parse(decodeURIComponent(u[s].attr("myuri"))),changeCommonImageColor(l.url,l.color.split(","),(function(t,e,o){var a=o.select("image");o.attr("dataurl",t),a.attr("href")?a.attr("href",t):a.attr("xlink:href",t)}),u[s]);return a},eo.addToRenderLoop=function(t){this.renderLoop[t]=1,this.loopTimeout&&(clearTimeout(this.loopTimeout),this.loopTimeout=null),this.loopTimeout=setTimeout((function(){for(var t in svgTool.loopTimeout=null,svgTool.renderLoop)svgTool.startRender(t);svgTool.renderLoop={}}),809)},eo.startRender=function(t){var e,o=this.container[t];e=this.getSvgStr(o,t),myStore.state.svgKeys[t]&&myVueApp.clearBox(t),canvg(this.canvasObj[t],e,{ignoreMouse:!0,log:!1,ignoreClear:!1,ignoreAnimation:!0,useCORS:!0,ignoreDimensions:!1,renderCallback:function(){myStore.state.svgKeys[t]&&myVueApp.appendCanvas(t,svgTool.canvasObj[t]),window.BLS&&window.BLS.updateTexture&&window.BLS.updateTexture(t)}})},eo.calcCanvasTransform=function(t,e){var o=0,a=0,n=ao/this.svgMaxSize;e.svgW>e.svgH?a=ao-e.svgH*this.svgMaxSize/e.svgW*n>>1:o=ao-e.svgW*this.svgMaxSize/e.svgH*n>>1,this.canvasObj[t].style.transformOrigin=o+"px "+a+"px 0px",this.canvasObj[t].style.transform="scale("+n+")"};var so=eo,io={tempPiceArr:null,tempObj:{rgb:"",pantone:"",key:"",flag:!1},choiseColor:function(t,e,o,a){this.tempPiceArr=e,this.tempObj.rgb=t.rgb,this.tempObj.pantone=t.pantone,this.tempObj.key=o,this.tempObj.flag=!!a,a&&this.addHistoryStart({type:"color",rgb:t.rgb,pantone:t.pantone,changeArr:this.tempPiceArr,key:o})},changeColor:function(t){if(this.piceChange(t),this.tempObj.key)this.changeGroup(this.tempObj.rgb,t,this.tempObj.key);else for(var e in this.colorGroupObj)this.changeGroup(this.tempObj.rgb,t,e);this.tempObj.flag&&this.addHistoryEnd({type:"color",rgb:t.rgb,pantone:t.pantone,changeArr:this.tempPiceArr,key:this.tempObj.key})},piceChange:function(t){var e=0,o=this.tempPiceArr.length;for(e;e<o;e++)"stop"===this.tempPiceArr[e].type?this.tempPiceArr[e].attr("style","stop-color:#"+t.rgb):this.tempPiceArr[e].attr("fill","#"+t.rgb),this.tempPiceArr[e].attr("pantone",t.pantone)},changeGroup:function(t,e,o){var a,n,s,i,r,l={color1:"",color2:null,key:o};if(n=this.colorGroupObj[o][t],n){for(this.addToRenderLoop(o),this.colorGroupObj[o][e.rgb]||(this.colorGroupObj[o][e.rgb]=[],l.color2={rgb:e.rgb,pantone:e.pantone}),a=this.colorGroupObj[o][e.rgb],i=this.tempPiceArr.length,s=0;s<i;s++)for(r=0;r<n.length;r++)if(this.tempPiceArr[s]===n[r]){a.push(this.tempPiceArr[s]),n.splice(r,1);break}n[0]||(delete this.colorGroupObj[o][t],l.color1=t),myStore.commit("changeSvgColor",l)}}},ro=io,lo={nowIndex:-1,historyArr:[],historyObj:null},co=10;lo.addHistoryStart=function(t){var e={start:t};this.historyObj=e},lo.addHistoryEndToStart=function(){var t;this.historyObj||(t=this.historyArr[this.nowIndex].end,this.choiseColor({rgb:t.rgb,pantone:t.pantone},t.changeArr,t.key,!0))},lo.addHistoryEnd=function(t){this.historyObj.end=t,this.nowIndex+1<this.historyArr.length?this.historyArr.splice(++this.nowIndex,this.historyArr.length-this.nowIndex,this.historyObj):this.nowIndex=this.historyArr.push(this.historyObj)-1,this.historyArr.length>co&&(this.historyArr.shift(),this.nowIndex--),this.historyObj=null,myStore.commit("setCanUndo",!0),myStore.commit("setCanRedo",!1)},lo.undo=function(){var t=this.historyArr[this.nowIndex--];"color"===t.start.type?(this.choiseColor({rgb:t.end.rgb,pantone:t.end.pantone},t.start.changeArr,t.start.key),this.changeColor({rgb:t.start.rgb,pantone:t.start.pantone})):"matrix"===t.start.type?this.toMatrix(t.start.image,t.start.matrix,t.start.key,t.start.isMi):"layer"===t.start.type?this.layerCtrl(!t.start.flag,!1,t.start.image,t.start.key):"add"===t.start.type?this.delImg(t.start.key,t.start.image):"del"===t.start.type?this.addImg(t.start.url,t.start.imgid,t.start.myuri,t.start.key,t.start.loc,t.start.image,t.start.loc2):"change"===t.start.type&&this.changeImg(t.start.url,t.start.myuri,t.start.key,t.start.image),myStore.commit("setCanRedo",!0),this.nowIndex<0&&myStore.commit("setCanUndo",!1)},lo.redo=function(){var t=this.historyArr[++this.nowIndex];"color"===t.start.type?(this.choiseColor({rgb:t.start.rgb,pantone:t.start.pantone},t.start.changeArr,t.start.key),this.changeColor({rgb:t.end.rgb,pantone:t.end.pantone})):"matrix"===t.start.type?this.toMatrix(t.start.image,t.end.matrix,t.start.key,t.start.isMi):"layer"===t.start.type?this.layerCtrl(t.start.flag,!1,t.start.image,t.start.key):"add"===t.start.type?this.addImg(t.start.url,t.start.imgid,t.start.myuri,t.start.key,"",t.start.image,""):"del"===t.start.type?this.delImg(t.start.key,t.start.image):"change"===t.start.type&&this.changeImg(t.end.url,t.end.myuri,t.end.key,t.end.image),myStore.commit("setCanUndo",!0),this.nowIndex>this.historyArr.length-2&&myStore.commit("setCanRedo",!1)};var uo=lo,go={currentImg:null,reSetImg:function(t){var e,o,a=t.clipG.selectAll("g"),n=0,s=a.length;for(n;n<s;n++)e=a[n].attr("imgid"),"common"===e?(o=JSON.parse(decodeURIComponent(a[n].attr("myuri"))),o.color&&changeCommonImageColor(o.url,o.color.split(","),(function(t,e,o){var a=o.select("image");o.attr("dataurl",t),a.attr("href")?a.attr("href",t):a.attr("xlink:href",t)}),a[n])):"default"!==e&&"text"!==e&&myStore.commit("addImageTimes",e),this.dragImgG(a[n])},loadImg:function(t,e,o){var a=new Image;a.src=t;var n=this;a.onload=function(t){var a,s;a=e.svgW-this.naturalWidth>>1,s=e.svgH-this.naturalHeight>>1,o&&o.call(n,a,s,this.naturalWidth,this.naturalHeight)}},addImg:function(t,e,o,a,n,s,i){var r=a||this.currentKey,l=this.container[r];this.loadImg(t,l,(function(c,u,g,m){var d=l.clipG.g(l.image(t,c,u,g,m));if(d.attr({imgid:e,dataurl:t,myuri:o}),"text"!==e&&"common"!==e&&"default"!==e&&myStore.commit("addImageTimes",e),a){"string"===typeof n&&""!==n&&d.attr("transform",n),"string"===typeof i&&""!==i&&d.select("image").attr("transform",i),this.historyArr[this.nowIndex].start.image=d;var h=0,p=this.historyArr.length;for(h;h<p;h++)this.historyArr[h].start.image===s&&(this.historyArr[h].start.image=d,this.historyArr[h].end.image=d)}else this.addHistoryStart({type:"add",key:r,myuri:o,imgid:e,image:d,url:t}),this.addHistoryEnd({});this.dragImgG(d),this.addToRenderLoop(r)}))},delImg:function(t,e){var o,a,n,s,i,r=t||this.currentKey;e=e||this.currentImg,a=e.attr("imgid"),t||(o=e.attr("myuri"),n=e.attr("dataurl"),s=e.transform().local,i=e.select("image").transform().local,this.addHistoryStart({type:"del",key:r,url:n,myuri:o,imgid:a,image:e,loc:s,loc2:i}),this.addHistoryEnd({})),e.remove(),"default"!==a&&"text"!==a&&"common"!==a&&myStore.commit("subImageTimes",a),this.addToRenderLoop(r),this.cancelFun()},changeImg:function(t,e,o,a){var n=o||this.currentKey,s=this.container[n];this.loadImg(t,s,(function(s,i,r,l){var c,u,g,m;if(a=a||this.currentImg,g=JSON.parse(decodeURIComponent(e)),3===myStore.state.whatTool&&myStore.state.pantoneBoxShow&&myStore.commit("setChoisePantone",{rgb:g.fill_color,pantone:g.pantone1}),o)for(m in g)myStore.commit("setTextObj",{key:m,value:g[m]});else c=a.attr("dataurl"),u=a.attr("myuri"),this.addHistoryStart({type:"change",key:n,url:c,myuri:u,image:a}),this.addHistoryEnd({type:"change",key:n,url:t,myuri:e,image:a});a.attr({myuri:e,dataurl:t});var d=a.select("image");d.attr("href")?d.attr("href",t):d.attr("xlink:href",t),d.attr({width:r,height:l,x:s,y:i}),this.bbox=a.getBBox(),this.computedHandle(),this.addToRenderLoop(n),2===this.cancelLate&&(this.cancelFun(),this.cancelLate=0)}))},copyTo:function(t){var e,o,a,n,s,i=this.currentImg;e=i.attr("dataurl"),o=i.attr("imgid"),a=i.attr("myuri"),n=i.transform().local,s=i.select("image").transform().local,window.myVueApp.clikcPart(t),this.addImg(e,o,a,null,n,null,s),this.addToRenderLoop(t),this.cancelFun()}},mo=go,ho={computeM:function(t){this.currentImg.attr("transform",this.loc+(this.loc?t.type.toUpperCase():t.type)+[t.x,t.y,t.z,t.u])},mirrorM:function(t){var e,o,a=this.currentImg.select("image"),n=a.transform();this.addHistoryStart({type:"matrix",image:this.currentImg,matrix:n.local,key:this.currentKey,isMi:!0}),t?(e=a.getBBox().cy,o=n.localMatrix.multLeft(1,0,0,-1,0,2*e)):(e=a.getBBox().cx,o=n.localMatrix.multLeft(-1,0,0,1,2*e,0)),a.transform(o),this.addHistoryEnd({type:"matrix",image:this.currentImg,matrix:a.transform().local,key:this.currentKey,isMi:!0}),this.addToRenderLoop(this.currentKey)},fullSvg:function(t){var e,o,a,n,s;n=this.currentSvg.svgW/this.bbox.w,s=this.currentSvg.svgH/this.bbox.h,e=t?n<s?n:s:n>s?n:s,o=this.currentSvg.svgW-this.bbox.w*e>>1,a=this.currentSvg.svgH-this.bbox.h*e>>1,this.loc=this.currentImg.transform().local,this.addHistoryStart({type:"matrix",image:this.currentImg,matrix:this.loc,key:this.currentKey}),this.computeM({type:"t",x:o-this.bbox.x,y:a-this.bbox.y}),this.loc=this.currentImg.transform().local,this.computeM({type:"s",x:e,y:e,z:o,u:a}),this.addHistoryEnd({type:"matrix",image:this.currentImg,matrix:this.currentImg.transform().local,key:this.currentKey}),this.bbox=this.currentImg.getBBox(),this.computedHandle(),this.addToRenderLoop(this.currentKey)},alignSvg:function(t){var e=0,o=0;t?o=this.currentSvg.svgH/2-this.bbox.cy|0:e=this.currentSvg.svgW/2-this.bbox.cx|0,(e||o)&&(this.loc=this.currentImg.transform().local,this.addHistoryStart({type:"matrix",image:this.currentImg,matrix:this.loc,key:this.currentKey}),this.computeM({type:"t",x:e,y:o}),this.addHistoryEnd({type:"matrix",image:this.currentImg,matrix:this.currentImg.transform().local,key:this.currentKey}),this.bbox=this.currentImg.getBBox(),this.computedHandle(),this.addToRenderLoop(this.currentKey))},toMatrix:function(t,e,o,a){a?t.select("image").attr("transform",e):t.attr("transform",e),this.addToRenderLoop(o),this.bbox=t.getBBox(),myStore.state.imageToolShow&&this.computedHandle()}},po=ho,vo={createClip:function(t,e){var o=e.g();e.el("clipPath",{id:"clip"+t}).add(e.caipian.clone().attr("fill","none")),o.attr({style:"clip-path: url(#clip"+t+")",id:"clipg"+t}),e.clipG=o},getClipG:function(t,e){var o=e.select("#id"+t+"clip");o?o.attr("id","clip"+t):o=e.select("#clip"+t+"clip"),e.clipG=e.select("#id"+t+"clipg"),e.clipG?e.clipG.attr({style:"clip-path: url(#clip"+t+")",id:"clipg"+t}):e.clipG=e.select("#clipg"+t)}},fo=vo,bo={needAddToHistory:!1,loc:"",bbox:null,cancelLate:0,cancelFun:function(){this.triggerPart(),this.currentImg=null,this.bbox=null,this.loc="",this.needAddToHistory=!1,this.currentPart=null,myStore.commit("setChangeText",!1),myStore.commit("setCommonColorBtn",!1),myStore.commit("setPantoneBoxShow",!1),myStore.commit("setImageToolShow",!1),myStore.commit("setFontShow",!1),myStore.commit("setOutlineShow",!1),myStore.commit("setShapeShow",!1),myStore.commit("setCopyBoxShow",!1),myStore.commit("setTextObj",{key:"txt",value:""})},clickSvg:function(t){t.mousedown((function(e){if(1===myStore.state.whatTool){e.preventDefault(),e.stopPropagation(),this.currentImg=null,this.bbox=null,this.loc="",this.needAddToHistory=!1;var o=Snap.getRGB(t.attr("fill")).hex.replace("#","").toUpperCase(),a=t.attr("pantone")||"";this.triggerPart(t),myStore.commit("setPantoneBoxShow",!0),myStore.commit("setChoisePantone",{rgb:o,pantone:a}),myStore.commit("setColorTitle","Choose Your Colour"),myStore.commit("setImageToolShow",!1),svgTool.choiseColor({rgb:o,pantone:a},[t],this.currentKey,!0)}}),this)},dragImgG:function(t){var e,o=this;t.drag((function(t,e,a,n,s){s.preventDefault(),s.stopPropagation(),o.needAddToHistory=!0,o.computeM({x:t/o.currentSvg.ratio,y:e/o.currentSvg.ratio,type:"t"})}),(function(t,a,n){var s,i;if(n.preventDefault(),n.stopPropagation(),this!==o.currentImg)if(e=this.attr("imgid"),"text"===e){for(i in s=JSON.parse(decodeURIComponent(this.attr("myuri"))),myStore.commit("setWhatTool",3),s)myStore.commit("setTextObj",{key:i,value:s[i]});myStore.commit("setChangeText",!0),myStore.commit("setCommonColorBtn",!1)}else"common"===e?(myStore.commit("setChangeText",!1),myStore.commit("setCommonColorBtn",!0)):(myStore.commit("setChangeText",!1),myStore.commit("setCommonColorBtn",!1));o.currentImg=this,o.loc=this.transform().local,o.needAddToHistory=!1,myStore.commit("setImageToolShow",!1),myStore.commit("setPantoneBoxShow",!1),o.addHistoryStart({type:"matrix",matrix:o.loc,image:this,key:o.currentKey})}),(function(t){t.preventDefault(),t.stopPropagation(),myStore.commit("setImageToolShow",!0),o.needAddToHistory&&(o.addToRenderLoop(o.currentKey),o.addHistoryEnd({type:"matrix",matrix:this.transform().local,image:this,key:o.currentKey})),o.bbox=this.getBBox(),o.computedHandle()}))}},wo=bo,yo=(o("fb6a"),o("bf2d")),xo={colorGroupObj:{},noColorEls:["g","image","desc","defs","clipPath","linearGradient","radialGradient"],searchEls:function(t,e){var o=e.selectAll("*"),a=o.length,n=0,s=null;for(this.colorGroupObj[t]={},myStore.commit("addSvgColorOps",t),n;n<a;n++)s=o[n].type,this.noColorEls.includes(s)||"clipPath"===o[n].parent().type?"linearGradient"!==s&&"radialGradient"!==s||this.fristTime&&this.changeGradientId(t,o[n]):this.colorGroup(t,o[n],s,e)},colorGroup:function(t,e,o){var a,n;if("stop"===o)return n=e.attr("style").slice(12).toUpperCase(),void this.addColorInGroup(n,e,t);a=e.attr("fill"),"none"===a?e.remove():"string"===typeof a&&"u"!==a[0]?(n=Snap.getRGB(a).hex.replace("#","").toUpperCase(),this.addColorInGroup(n,e,t),this.clickSvg(e)):"string"===typeof a&&"u"!==a[0]||this.fristTime&&this.changeGradientFill(t,e,a)},changeGradientId:function(t,e){var o=e.attr("id")+t;e.attr("id",o)},changeGradientFill:function(t,e,o){var a;a="object"===Object(yo["a"])(o)?o.attr("id")+t:o.split("#")[1].replace(/"?\)/,"")+t,e.attr("fill","url(#"+a+")")},addColorInGroup:function(t,e,o){var a;this.colorGroupObj[o][t]||(a=e.attr("pantone")||"",myStore.commit("pushSvgColor",{key:o,rgb:t,pantone:a}),this.colorGroupObj[o][t]=[]),this.colorGroupObj[o][t].push(e)},getColorInGroupByColor:function(t,e){var o,a,n,s=[];if(e)for(n=this.colorGroupObj[e][t].length,a=0;a<n;a++)s.push(this.colorGroupObj[e][t][a]);else for(o in this.colorGroupObj)if(this.colorGroupObj[o][t])for(n=this.colorGroupObj[o][t].length,a=0;a<n;a++)s.push(this.colorGroupObj[o][t][a]);return s}},Co=xo,So={layerCtrl:function(t,e,o,a){var n;o=o||this.currentImg,a=a||this.currentKey,!t&&o.node.nextSibling?(e&&this.addHistoryStart({type:"layer",image:o,flag:t,key:a}),n=Snap(o.node.nextSibling),n.after(o),e&&this.addHistoryEnd({type:"layer",image:o,flag:t,key:a}),this.addToRenderLoop(a)):t&&o.node.previousSibling&&(e&&this.addHistoryStart({type:"layer",image:o,flag:t,key:a}),n=Snap(o.node.previousSibling),n.before(o),e&&this.addHistoryEnd({type:"layer",image:o,flag:t,key:a}),this.addToRenderLoop(a))}},To=So;function Bo(){for(var t,e=0,o=arguments.length;e<o;e++)for(t in arguments[e])"function"===typeof arguments[e][t]?Bo.prototype[t]=arguments[e][t]:this[t]=arguments[e][t]}Bo.prototype.computedHandle=function(){var t,e,o,a;t=this.bbox.w*this.currentSvg.ratio,e=this.bbox.h*this.currentSvg.ratio,o=this.currentSvg.startX+this.bbox.x*this.currentSvg.ratio,a=this.currentSvg.startY+this.bbox.y*this.currentSvg.ratio,myVueApp.move(t,e,o,a)},Bo.prototype.init=function(){var t;for(t in this.container)this.container[t].remove(),this.container[t]=null;for(t in this.container={},this.currentKey="",this.currentSvg=null,this.currentPart=null,this.fristTime=!0,this.svgShowed=!1,this.canvasObj)this.canvasObj[t]=null;this.canvasObj={},this.loopTimeout&&(clearTimeout(this.loopTimeout),this.loopTimeout=null,svgTool.renderLoop={}),this.colorGroupObj={},this.tempPiceArr=null,this.tempObj={rgb:"",pantone:"",key:"",flag:!1},this.needAddToHistory=!1,this.loc="",this.bbox=null,this.cancelLate=0,this.nowIndex=-1,this.historyArr=[],this.historyObj=null,this.currentImg=null},window.svgTool=new Bo(to,so,ro,uo,mo,po,fo,wo,Co,To);o("e25e");var $o=null,Oo=null,ko=[],_o=10,Io=new BABYLON.Animation("yRot","alpha",_o,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),Ao={createScene:function(t,e,o){return Oo=new BABYLON.Scene(t,o),$o=new BABYLON.ArcRotateCamera("Camera",0,0,10,new BABYLON.Vector3(0,0,0),Oo),$o.attachControl(e,!0),$o.setPosition(new BABYLON.Vector3(0,0,-10)),$o.upperBetaLimit=Math.PI/2+Math.PI/16,$o.lowerBetaLimit=Math.PI/2-Math.PI/16,$o.upperBetaLimit=Math.PI/2,$o.lowerBetaLimit=Math.PI/2,window.BLS.camera=$o,Oo},rotation:function(t){Oo.animationTimeScale=5;var e=window.BLS.RES.mtlfile[t].part_pic.part_pic_angle;e&&(ko=[],e=parseInt(e)+90,e=2/360*Math.PI*e,ko.push({frame:0,value:$o.alpha}),ko.push({frame:_o,value:e}),ko.length<=0||(Io.setKeys(ko),Oo.beginDirectAnimation($o,[Io],0,2*_o,!1)))}},Do=Ao,jo=(o("4160"),o("d81d"),o("b0c0"),o("159b"),{design_title:"White Short Sleeve Polo Shirts With Pockets",folder:"/upimg/model/901/",objfile:"1545203017183.jpg",camera_z:41,product_y:-53,mtlfile:{Placket:{map:{image:"20190227050819_168.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203031327.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545206464317.svg",part_pic_angle:"0"}},Binding_tape:{map:{image:"20190227050819_381.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203022642.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"",part_pic_angle:null}},pocket:{map:{image:"20190227050819_538.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203033566.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545203034748.svg",part_pic_angle:"0"}},collar:{map:{image:"20190227050819_561.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203023136.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545206472743.svg",part_pic_angle:"0"}},back:{map:{image:"20190227050819_963.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203019553.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545203020244.svg",part_pic_angle:"180"}},front:{map:{image:"20190227050820_60.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203027510.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545203028534.svg",part_pic_angle:"0"}},left_sleeve:{map:{image:"20190227050820_97.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203030529.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545203030219.svg",part_pic_angle:"90"}},right_sleeve:{map:{image:"20190227050820_130.svg"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:"1545203036875.jpg"},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"1545203036446.svg",part_pic_angle:"270"}},wire_225143087:{map:{image:"20190227050820_151.png"},parameters:{transparent:1,shininess:30,bumpScale:.1,aoMapIntensity:"1.00",normalMapIntensity:"1.00",roughness:"1.00",metalness:"1.00",effect_color:"#ffffff",effect_lightcolor:"#000000"},materials:"MeshPhongMaterial",bumpMap:{title:null,image:"",parameters:{repeat:[1,1],definition:1}},aoMap:{image:""},normalMap:{image:""},alphaMap:{image:""},specularMap:{image:""},roughnessMap:{image:""},metalnessMap:{image:""},part_pic:{image:"",part_pic_angle:null}}}});function Mo(){myStore.commit("setCanvasLoading",!0);var t=jo;if("object"!=Object(yo["a"])(t)&&(t=$.parseJSON(t)),getSaveObj(t.design_title),t){window.BLS.RES=t,window.globalData.base1+t.folder;window.globalData.base1,t.folder,t.objfile;var e="./res/1545203017183.zip";JSZipUtils.getBinaryContent(e,(function(e,o){if(e)return conosle.log(e);var a=new JSZip;a.loadAsync(o).then((function(t){return t.file("config.json").async("string")})).then((function(t){return a.file($.parseJSON(t).name).async("string")})).then((function(t){var e=new BABYLON.OBJFileLoader;return BABYLON.OBJFileLoader.INVERT_Y=!0,e.INVERT_Y=!0,e._parseSolid(null,Fo,t,null)})).then((function(e){Fo.cameras[0].setTarget(BABYLON.Vector3.Zero()),Fo.cameras[0].setPosition(new BABYLON.Vector3(0,0,t.camera_z)),Fo.cameras[0].target=e[0].position,Fo.cameras[0].storeState(),Fo.cameras[0].lowerRadiusLimit=t.camera_z-25,e.forEach((function(e){if(e.position.y=t.product_y,e.rotation.z=Math.PI,e.name&&"button"==e.name.toLowerCase())oa.createPBRMaterial(e.name,Fo,e);else{if(!t.mtlfile[e.name])return;t.mtlfile[e.name].name=e.name,oa.createStandardMaterial(e.name,Fo,e,t.mtlfile[e.name])}e.actionManager=new BABYLON.ActionManager(Fo),e.actionManager.registerAction(No),e.actionManager.registerAction(Po),e.actionManager.registerAction(Eo)}))})).catch((function(t){console.warn(t)}))}))}}window.lm=[];var Lo,No,Po,Eo,Fo,Ro,Ho,Uo,Go,Yo,Ko,zo,Wo=0,Vo=null,qo={},Jo={},Xo=null,Qo=null,Zo=[/stitch/i,/topstitch/i,/wire/i,/Topstitch_1/i,/Topstitch_2/i],ta={},ea=function(t){t=t.toLowerCase();var e=!1;return Zo.forEach((function(o){o.test(t)&&(e=!0)})),!!e},oa={registerAction:function(t){if(!t)return console.warn("注册事件无效");Vo=t},getResource:function(t,e,o){qo={},Jo={},ta={},window.BLS.NotEditData={},o?Fo=o:(Fo.materials=[],Fo.geometries=[],Fo.meshes=[]),Ro=function(t){Xo!==t.meshUnderPointer&&(Qo=new BABYLON.HighlightLayer("hl1",Fo),Qo.addMesh(t.meshUnderPointer,BABYLON.Color3.Green()),window.BLS.hl1=Qo)},Ho=function(t){Qo.dispose()},No=new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,Ro),Po=new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger,Ho),Eo=new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,oa.mouseClickMesh),oa.registerAction(window.myVueApp.clikcPart),Mo(t,e),Lo=oa.createCubeTexture(Fo)},createStandardMaterial:function(t,e,o,a){if(!e)return console.error("scene is null");if(!o)return console.error("mesh is null");var n=new BABYLON.StandardMaterial(t,e);if(n.backFaceCulling=!1,ea(a.name)&&(o.isPickable=!1,n.alpha=.25),n.reflectionTexture=Lo,n.specularColor=new BABYLON.Color3(0,0,0),n.invertNormalMapX=!0,n.invertNormalMapY=!0,n.maxSimultaneousLights=6,""!=a.map.image&&oa.createTexture("./res/"+a.map.image,e,n,"diffuseTexture"),""!=a.normalMap.image&&oa.createTexture("./res/"+a.normalMap.image,e,n,"bumpTexture"),o.material=n,qo[a.name]?qo[a.name].push(n):qo[a.name]=[n],!ta[a.name])if(ta[a.name]=!0,ta[a.name]=!0,""!=a.part_pic.image){var s="0"==a.part_pic.part_pic_angle;window.svgTool.loadSvg(a.name,"./res/"+a.map.image,"./res/"+a.part_pic.image,s,a.name,(function(t,o){Jo[t]=new BABYLON.DynamicTexture(t,o,e)}))}else{var i=a.map.image.split(".");i=i[i.length-1],"svg"!=i||ea(a.name)?window.BLS.NotEditData[a.name]=a.map.image:window.svgTool.loadSvg(a.name,"./res/"+a.map.image,null,!1,a.name,(function(t,o){Jo[t]=new BABYLON.DynamicTexture(t,o,e),Jo[t].wrapU=Jo[t].wrapV=1}))}},createPBRMaterial:function(t,e,o){if(!e)return console.error("scene is null");if(!o)return console.error("mesh is null");var a=new BABYLON.PBRMaterial(t,e);a.roughness=2,a.metallic=.02,a.albedoColor=new BABYLON.Color3(.99,.99,.99),o.material=a},createTexture:function(t,e,o,a){if(!e)return console.error("scene is null");if(!o)return console.error("material is null");Wo++;var n=new BABYLON.Texture(t,e,!1,!0,BABYLON.Texture.NEAREST_LINEAR_MIPLINEAR,(function(){--Wo,Wo<=0&&myStore.commit("setCanvasLoading",!1)}));switch(n.hasAlpha=!0,a){case"diffuseTexture":o.diffuseTexture=n;break;case"bumpTexture":n.level=1.3,o.bumpTexture=n;break;default:}},createCubeTexture:function(t){if(!t)return console.error("scene is null");var e=new BABYLON.CubeTexture("/static/skybox2/skybox4",t);return e.coordinatesMode=BABYLON.Texture.EQUIRECTANGULAR_MODE,e.level=.06,e},mouseClickMesh:function(t){if(Uo=new BABYLON.HighlightLayer("hl2",Fo),Uo.addMesh(t.meshUnderPointer,BABYLON.Color3.Blue()),setTimeout((function(){Uo.dispose()}),100),!Vo)return console.warn("事件未注册");Vo(t.meshUnderPointer.id,!0)},updateTexture:function(t){Jo[t]&&qo[t].forEach((function(e,o){e.diffuseTexture=Jo[t],e.diffuseTexture.update()}))}},aa=oa,na={createLights:function(t){Go=new BABYLON.DirectionalLight("DirectionalLight_F",new BABYLON.Vector3(0,4.622,-20),t),Go.intensity=.5,Go=new BABYLON.DirectionalLight("DirectionalLight_B",new BABYLON.Vector3(0,4.622,20),t),Go.intensity=.5,Go=new BABYLON.HemisphericLight("HemiLight_F",new BABYLON.Vector3(0,.974,.228),t),Go.intensity=.61,Go=new BABYLON.HemisphericLight("HemiLight_B",new BABYLON.Vector3(0,-.746,-.666),t),Go.intensity=.26,Go=new BABYLON.PointLight("P_L_light",new BABYLON.Vector3(-15.106,8.983,0),t),Go.intensity=.12,Go=new BABYLON.PointLight("P_R_light",new BABYLON.Vector3(15.106,8.983,0),t),Go.intensity=.12}},sa=na;window.BLS={};var ia=function(t){window.BLS.rotation=Do.rotation,window.BLS.updateTexture=aa.updateTexture,Yo=document.getElementById("canvasbox");var e={alpha:!0,stencil:!0,antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,limitDeviceRatio:window.devicePixelRatio,preserveDrawingBuffer:!0,lockstepMaxSteps:24};Ko=new BABYLON.Engine(Yo,!0,e,!0),window.BLS.Engine=Ko,Ko.loadingUIText="Loading...",zo=Do.createScene(Ko,Yo),window.scene=zo,zo.defaultCursor="grab",zo.clearColor=new BABYLON.Color3(245/255,247/255,247/255),sa.createLights(zo),Ko.runRenderLoop((function(){zo.render()})),aa.getResource(window.resourceUrl.getMoldById,{designid:t},zo),window.addEventListener("resize",(function(){Ko.resize()})),window.BLS.resize=function(){Ko.resize()}};window.BLS.saveImage=function(t,e,o){var a=Yo.width,n=Yo.height;if(Yo.width=o||800,Yo.height=o||800,window.BLS.hl1&&window.BLS.hl1.dispose(),window.BLS.camera.restoreState(),!(t<=0)){var s=0;zo.registerAfterRender((function(){s++<t&&(window.BLS.camera.alpha=2*Math.PI*(s/t+.25),BABYLON.Tools.CreateScreenshot(Ko,window.BLS.camera,o||800,(function(t){e&&e(t,s)}))),s==t&&(Yo.width=a,Yo.height=n)}))}},window.BLS.init=ia,window.BLS.getResourceById=function(t){t&&window.resourceUrl.getMoldById&&aa.getResource(window.resourceUrl.getMoldById,{designid:t})};o("812b"),o("2f72");var ra={"2365C":[{pantone:"2365C",rgb:"EFBAE1"},{pantone:"236C",rgb:"F1A7DC"},{pantone:"237C",rgb:"EC86D0"},{pantone:"238C",rgb:"E45DBF"},{pantone:"239C",rgb:"DB3EB1"},{pantone:"240C",rgb:"C5299B"},{pantone:"241C",rgb:"AF1685"},{pantone:"242C",rgb:"80225F"},{pantone:"262C",rgb:"51284F"}],"196C":[{pantone:"196C",rgb:"ECC7CD"},{pantone:"182C",rgb:"FABBCB"},{pantone:"183C",rgb:"FC9BB3"},{pantone:"184C",rgb:"F65275"},{pantone:"185C",rgb:"E4002B"},{pantone:"186C",rgb:"C8102E"},{pantone:"187C",rgb:"A6192E"},{pantone:"188C",rgb:"76232F"},{pantone:"7631C",rgb:"572D2D"}],"162C":[{pantone:"162C",rgb:"FFBE9F"},{pantone:"1555C",rgb:"FFB990"},{pantone:"163C",rgb:"FF9D6E"},{pantone:"164C",rgb:"FF7F41"},{pantone:"165C",rgb:"FF671F"},{pantone:"166C",rgb:"E35205"},{pantone:"167C",rgb:"BE531C"},{pantone:"1615C",rgb:"8B4720"},{pantone:"168C",rgb:"73381D"}],"0131C":[{pantone:"0131C",rgb:"F2F0A1"},{pantone:"106C",rgb:"F9E547"},{pantone:"114C",rgb:"FBDD40"},{pantone:"115C",rgb:"FDDA24"},{pantone:"116C",rgb:"FFCD00"},{pantone:"117C",rgb:"C99700"},{pantone:"110C",rgb:"DAAA00"},{pantone:"118C",rgb:"AC8400"},{pantone:"119C",rgb:"897322"}],"386C":[{pantone:"386C",rgb:"E9EC6B"},{pantone:"393C",rgb:"F0EC74"},{pantone:"387C",rgb:"E3E935"},{pantone:"388C",rgb:"E0E721"},{pantone:"389C",rgb:"D0DF00"},{pantone:"390C",rgb:"B5BD00"},{pantone:"398C",rgb:"ADA400"},{pantone:"391C",rgb:"9A9500"},{pantone:"392C",rgb:"827A04"}],"372C":[{pantone:"372C",rgb:"D4EB8E"},{pantone:"358C",rgb:"ADDC91"},{pantone:"359C",rgb:"A1D884"},{pantone:"360C",rgb:"6CC24A"},{pantone:"361C",rgb:"43B02A"},{pantone:"7738C",rgb:"48A23F"},{pantone:"362C",rgb:"509E2F"},{pantone:"363C",rgb:"4C8C2B"},{pantone:"364C",rgb:"4A7729"}],"317C":[{pantone:"317C",rgb:"B1E4E3"},{pantone:"318C",rgb:"88DBDF"},{pantone:"3242C",rgb:"71DBD4"},{pantone:"3252C",rgb:"2AD2C9"},{pantone:"3262C",rgb:"00BFB3"},{pantone:"3272C",rgb:"00A499"},{pantone:"3282C",rgb:"008578"},{pantone:"3292C",rgb:"00594F"},{pantone:"3302C",rgb:"004C45"}],"2905C":[{pantone:"2905C",rgb:"8DC8E8"},{pantone:"297C",rgb:"71C5E8"},{pantone:"298C",rgb:"41B6E6"},{pantone:"299C",rgb:"00A3E0"},{pantone:"2925C",rgb:"009CDE"},{pantone:"300C",rgb:"005EB8"},{pantone:"301C",rgb:"004B87"},{pantone:"302C",rgb:"003B5C"},{pantone:"303C",rgb:"002A3A"}],"263C":[{pantone:"263C",rgb:"D7C6E6"},{pantone:"256C",rgb:"D6BFDD"},{pantone:"2635C",rgb:"C5B4E3"},{pantone:"2645C",rgb:"AD96DC"},{pantone:"2655C",rgb:"9678D3"},{pantone:"2665C",rgb:"7D55C7"},{pantone:"267C",rgb:"5F259F"},{pantone:"2685C",rgb:"330072"},{pantone:"2695C",rgb:"2E1A47"}],white:[{pantone:"white",rgb:"FEFEFE"},{pantone:"Cool Gray1C",rgb:"D9D9D6"},{pantone:"Cool Gray2C",rgb:"D0D0CE"},{pantone:"Cool Gray3C",rgb:"C8C9C7"},{pantone:"Cool Gray4C",rgb:"BBBCBC"},{pantone:"Cool Gray5C",rgb:"B1B3B3"},{pantone:"Cool Gray6C",rgb:"A7A8AA"},{pantone:"Cool Gray7C",rgb:"97999B"},{pantone:"Cool Gray9C",rgb:"75787B"}],"Cool Gray10C":[{pantone:"Cool Gray10C",rgb:"63666A"},{pantone:"Cool Gray11C",rgb:"53565A"},{pantone:"Black 7C",rgb:"3D3935"},{pantone:"Black C",rgb:"2D2926"},{pantone:"Black 2C",rgb:"332F21"},{pantone:"Black 3C",rgb:"212721"},{pantone:"Black 4C",rgb:"31261D"},{pantone:"Black 5C",rgb:"3E2B2E"},{pantone:"Black C",rgb:"2D2926"}],"801C":[{pantone:"801C",rgb:"009ACE"},{pantone:"802C",rgb:"44D62C"},{pantone:"803C",rgb:"FFE900"},{pantone:"804C",rgb:"FFAA4D"},{pantone:"805C",rgb:"FF7276"},{pantone:"806C",rgb:"FF3EB5"},{pantone:"807C",rgb:"EA27C2"},{pantone:"Red 032C",rgb:"EF3340"},{pantone:"Orange 021C",rgb:"FE5000"}]};a["a"].use(Ue["a"]),a["a"].config.productionTip=!0,"shop"===globalData.query.scene&&(window.document.domain=globalData.myDomain);var la=new Ue["a"].Store({state:{svgBoxShow:!1,whatTool:1,svgKeys:{},whichSvg:"",imageToolShow:!1,copyBoxShow:!1,svgColorObj:{},choisePantone:{rgb:"",pantone:""},pantoneBoxShow:!1,canUndo:!1,canRedo:!1,imageTimes:{},changeText:!1,textObj:{txt:"",font:"5",fill_color:"000033",text_shape:"NORMAl",stroke:"",strokewidth:"4",h:"150",shape_set:"4",pantone1:"Black 6C",pantone2:""},colorTitle:"Choose Your Colour",fontShow:!1,outlineShow:!1,shapeShow:!1,salt:"SSFSlwm588ADF#$#SADFE#ASDFAS(*&D",pantoneData:[],latelyColor:JSON.parse(localStorage.getItem("latelyColor"))||[],smallScreen:!1,title:"",categoriesTabShow:!1,canvasLoading:!1,shadeState:0,shareUrl:window.globalData.base3,commonColorBtn:!1},mutations:{initVue:function(t){t.svgBoxShow=!1,t.whatTool=1,t.svgKeys={},t.whichSvg="",t.svgColorObj={},t.choisePantone={rgb:"",pantone:""},t.canUndo=!1,t.canRedo=!1,t.imageTimes={},t.textObj={txt:"",font:"5",fill_color:"000033",text_shape:"NORMAl",stroke:"",strokewidth:"4",h:"150",shape_set:"4",pantone1:"Black 6C",pantone2:""},t.title="",t.categoriesTabShow=!1,t.shadeState=0,t.commonColorBtn=!1},setSvgBoxShow:function(t,e){t.svgBoxShow=e},setWhatTool:function(t,e){t.whatTool=e},addSvgKeys:function(t,e){var o={};o.flag=e.flag,o.title=e.title,a["a"].set(t.svgKeys,e.key,o)},setWhichSvg:function(t,e){t.whichSvg=e},setImageToolShow:function(t,e){t.imageToolShow=e},setCopyBoxShow:function(t,e){t.copyBoxShow=e},addSvgColorOps:function(t,e){a["a"].set(t.svgColorObj,e,[])},pushSvgColor:function(t,e){t.svgColorObj[e.key].push({rgb:e.rgb,pantone:e.pantone})},changeSvgColor:function(t,e){var o=0,a=t.svgColorObj[e.key].length,n=!!e.color2;for(o;o<a&&e.color1;o++)if(t.svgColorObj[e.key][o].rgb===e.color1){t.svgColorObj[e.key].splice(o,1),a--;break}for(o=0;o<a&&e.color2;o++)t.svgColorObj[e.key][o].rgb===e.color2.rgb&&(n=!1);n&&t.svgColorObj[e.key].push(e.color2)},setChoisePantone:function(t,e){t.choisePantone.rgb=e.rgb,t.choisePantone.pantone=e.pantone},setPantoneBoxShow:function(t,e){t.pantoneBoxShow=e},setCanUndo:function(t,e){t.canUndo=e},setCanRedo:function(t,e){t.canRedo=e},addImageTimes:function(t,e){void 0===t.imageTimes[e]?a["a"].set(t.imageTimes,e,1):t.imageTimes[e]++},subImageTimes:function(t,e){t.imageTimes[e]--},setChangeText:function(t,e){t.changeText=e},setTextObj:function(t,e){t.textObj[e.key]=e.value},setColorTitle:function(t,e){t.colorTitle=e},setFontShow:function(t,e){t.fontShow=e},setOutlineShow:function(t,e){t.outlineShow=e},setShapeShow:function(t,e){t.shapeShow=e},addPantoneData:function(t,e){t.pantoneData.push(e)},addLatelyColor:function(t,e){var o=0,a=t.latelyColor.length;for(o;o<a;o++)if(t.latelyColor[o].rgb===e.rgb){t.latelyColor.splice(o,1);break}t.latelyColor.unshift({rgb:e.rgb,pantone:e.pantone})>9&&t.latelyColor.pop(),localStorage.setItem("latelyColor",JSON.stringify(t.latelyColor))},setSmallScreen:function(t,e){t.smallScreen=e},setTitle:function(t,e){t.title=e,"="===t.shareUrl[t.shareUrl.length-1]&&(t.shareUrl+=t.title)},setCanvasLoading:function(t,e){e||"shop"!==globalData.query.scene||"0"!==globalData.query.bz_edit||(t.categoriesTabShow=!0),perFun(e),t.canvasLoading=e},setShadeState:function(t,e){t.shadeState=e},setShareUrl:function(t,e){t.shareUrl=window.globalData.base3+"?designid="+e+"&title=",t.title&&(t.shareUrl+=t.title)},setCommonColorBtn:function(t,e){t.commonColorBtn=e}},getters:{},actions:{}});window.getFontPic=function(t,e){var o=[la.state.salt],a={};for(var n in t)o.push(t[n]),a[n]=t[n];a.signature=abcde(o.sort().join("")),$.ajax({type:"POST",url:resourceUrl.buildFontImage,data:a,success:function(t){0===t.error_code?e&&e(globalData.base2+t.data):alert("Failed,please try again")}})};var ca,ua,ga=ra;for(ca in ga["Cool Gray10C"][8]={rgb:"000033",pantone:"Black 6C"},ga)for(ua=0;ua<ga[ca].length;ua++)la.commit("addPantoneData",ga[ca][ua]);window.setProduct=function(t,e){window.myStore.commit("setTitle",t),e&&window.myStore.commit("setShadeState",4)},window.myVueApp={},window.myStore=la,new a["a"]({store:la,el:"#app",components:{myApp:He},render:function(t){return t(He)}})},"6e43":function(t,e,o){"use strict";var a=o("4c71"),n=o.n(a);n.a},"75ed":function(t,e,o){},"75fb":function(t,e,o){},"7e8e":function(t,e,o){"use strict";var a=o("a33c"),n=o.n(a);n.a},"812b":function(t,e,o){},"8b5b":function(t,e,o){"use strict";var a=o("2487"),n=o.n(a);n.a},"97c4":function(t,e,o){"use strict";var a=o("efea"),n=o.n(a);n.a},a33c:function(t,e,o){},ab51:function(t,e,o){"use strict";var a=o("d8c4"),n=o.n(a);n.a},ac33:function(t,e,o){},bd50:function(t,e,o){},bede:function(t,e,o){},d3fd:function(t,e,o){"use strict";var a=o("3904"),n=o.n(a);n.a},d503:function(t,e,o){"use strict";var a=o("bd50"),n=o.n(a);n.a},d577:function(t,e,o){"use strict";var a=o("fd1d"),n=o.n(a);n.a},d592:function(t,e,o){"use strict";var a=o("35f4"),n=o.n(a);n.a},d81e:function(t,e,o){"use strict";var a=o("75ed"),n=o.n(a);n.a},d8c4:function(t,e,o){},d969:function(t,e,o){"use strict";var a=o("0074"),n=o.n(a);n.a},daaa:function(t,e,o){},dac2:function(t,e,o){},dd1d:function(t,e,o){"use strict";var a=o("e720"),n=o.n(a);n.a},ddfc:function(t,e,o){},dee7:function(t,e,o){"use strict";var a=o("daaa"),n=o.n(a);n.a},e720:function(t,e,o){},efea:function(t,e,o){},f933:function(t,e,o){"use strict";var a=o("ddfc"),n=o.n(a);n.a},fb70:function(t,e,o){"use strict";var a=o("050d"),n=o.n(a);n.a},fd1d:function(t,e,o){}});
//# sourceMappingURL=app.78b36f47.js.map